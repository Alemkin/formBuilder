/** 
 * jquery.formBuilder - An advanced HTML5 form creation & validation framework
 * @version v2.0.0
 * @link http://autodatadirect.github.io/formBuilder/
 * @repository https://github.com/autodatadirect/formBuilder
 * @license MIT
 */


(function($){"use strict";var code="en";var acceptedCodes=["en","eng"];if(typeof $.formBuilder==="undefined"){$.formBuilder={}}var lang=$.formBuilder.lang;if(!lang){lang=$.formBuilder.lang={}}if(!lang.locales){lang.locales={}}if(!lang.locales[code]){lang.locales[code]={}}if(typeof lang.code==="undefined"){var browserCode;browserCode=navigator.language;if(!browserCode){browserCode=navigator.userLanguage}if(!browserCode){browserCode=navigator.browserLanguage}if(!browserCode){browserCode=navigator.systemLanguage}if(browserCode){var dashIndex=browserCode.indexOf("-");browserCode=browserCode.slice(0,dashIndex>0?dashIndex:undefined);if(acceptedCodes.indexOf(browserCode)!==-1){lang.code=code}}}$.extend(true,lang.locales[code],{remove:"Remove",from:"From",to:"To",custom:"Custom",day:"Day",week:"Week",month:"Month",year:"Year",required:"required",defaultSendInstruction:"press enter to submit",invalid:"invalid",over:"over",under:"under",mobile:"Mobile",home:"Home",work:"Work",fax:"Fax",yes:"Yes",no:"No"});var dict=$.formBuilder.lang.dict})(jQuery);(function($){"use strict";var code="es";var acceptedCodes=["es","spa"];if(typeof $.formBuilder==="undefined"){$.formBuilder={}}var lang=$.formBuilder.lang;if(!lang){lang=$.formBuilder.lang={}}if(!lang.locales){lang.locales={}}if(!lang.locales[code]){lang.locales[code]={}}if(typeof lang.code==="undefined"){var browserCode;browserCode=navigator.language;if(!browserCode){browserCode=navigator.userLanguage}if(!browserCode){browserCode=navigator.browserLanguage}if(!browserCode){browserCode=navigator.systemLanguage}if(browserCode){var dashIndex=browserCode.indexOf("-");browserCode=browserCode.slice(0,dashIndex>0?dashIndex:undefined);if(acceptedCodes.indexOf(browserCode)!==-1){lang.code=code}}}$.extend(true,lang.locales[code],{remove:"Quitar",mobile:"Móvil",home:"Casa",work:"Trabajo",fax:"Fax",yes:"Sí",no:"No"});$.fn.datepicker.dates[code]={days:["Domingo","Lunes","Martes","Mi&eacute;rcoles","Jueves","Viernes","S&aacute;bado"],daysShort:["Dom","Lun","Mar","Mi&eacute;","Juv","Vie","S&aacute;b"],daysMin:["Do","Lu","Ma","Mi","Ju","Vi","S&aacute;"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],today:"Hoy",clear:"Borre",rtl:false}})(jQuery);(function($){"use strict";$.widget("formBuilder.spin",{options:{lines:10,length:4,width:2,radius:3,rotate:0,color:"#000",speed:1.5,trail:60,shadow:false,hwaccel:false,className:"spinner",zIndex:0,top:"0",left:"1000"},_spinner:undefined,_create:function(){var self=this;self._spinner=new Spinner(self.options)},_init:function(){this.start()},start:function(){this._spinner.spin(this.element[0])},stop:function(){this._spinner.stop()},_destroy:function(){var self=this;self.stop();delete self._spinner}})})(jQuery);(function($){"use strict";if(typeof window.console==="undefined"){window.console={log:function(){},dir:function(){},timeStamp:function(){},time:function(){},timeEnd:function(){}}}if(typeof console.timeStamp==="undefined"){console.timeStamp=function(){}}if(typeof console.time==="undefined"){console.time=function(){}}if(typeof console.timeEnd==="undefined"){console.timeEnd=function(){}}if(typeof Object.create==="undefined"){Object.create=function(o){function F(){}F.prototype=o;return new F}}if(typeof $.formBuilder==="undefined"){$.formBuilder={}}if(typeof $.formBuilder.util==="undefined"){$.formBuilder.util={}}var util=$.formBuilder.util;var lang=$.formBuilder.lang;if(typeof lang.code==="undefined"||!lang.locales[lang.code]){lang.code="en"}lang.dict={};$.extend(true,lang.dict,lang.locales.en);if(lang.code!=="en"){$.extend(lang.dict,lang.locales[lang.code])}if(typeof util.selectPath==="undefined"){util.selectPath=function(namespace,domKey){if(namespace===undefined){return}if(domKey===undefined||domKey===""){return namespace}var i,a=domKey.toString().split(".");for(i=0;i<a.length;i+=1){var key=a[i];if(key.match(/^[0-9]{1,3}$/)){key=parseInt(key,10)}if(key===0&&!$.isArray(namespace)){continue}if(namespace===undefined||namespace===null){return undefined}namespace=namespace[key];if(i===a.length-1||namespace===undefined){return namespace}}}}if(typeof util.insertPath==="undefined"){util.insertPath=function(namespace,domKey,obj){var i,a=domKey.split("."),origRef=namespace;var types=[],key,type;for(i=0;i<a.length;i+=1){key=a[i];if(i===a.length-1){if(key.match(/^[0-9]{1,3}$/)){types.push({k:parseInt(key,10),v:obj})}else{types.push({k:key,v:obj})}}else if(key.match(/^[0-9]{1,3}$/)){types.push({k:parseInt(key,10),v:{}})}else{types.push({k:key,v:{}})}}for(i=0;i<types.length;i+=1){type=types[i];key=type.k;if(i===a.length-1){namespace[key]=type.v}else{if(typeof namespace[key]==="undefined"){namespace[key]=type.v}namespace=namespace[key]}}return origRef}}if(typeof util.deletePath==="undefined"){util.deletePath=function(namespace,domKey){var a=domKey.split("."),i;for(i=0;i<a.length;i+=1){if(i===a.length-1){delete namespace[a[i]]}else{if(typeof namespace[a[i]]==="undefined"){return}namespace=namespace[a[i]]}}}}if(typeof $.fn.childOf==="undefined"){$.fn.childOf=function(b,includeSelf){var i;if(b instanceof jQuery){b=b[0]}if(includeSelf&&b===this[0]){return true}var p=this.parents();for(i=0;i<p.length;i++){if(b===p[i]){return true}}return false}}if(typeof window.isEmpty==="undefined"){window.isEmpty=function isEmpty(a){if(a===0){return false}return!a}}if(typeof util.equals==="undefined"){util.equals=function(a,b){var p;if(a===b){return true}if(window.isEmpty(a)&&window.isEmpty(b)){return true}if(window.isEmpty(a)||window.isEmpty(b)){return false}switch(typeof a){case"object":for(p in a){if(a.hasOwnProperty(p)){if(!util.equals(a[p],b[p])){return false}}}for(p in b){if(b.hasOwnProperty(p)){if(!util.equals(a[p],b[p])){return false}}}break;case"function":if(typeof b==="undefined"||a.toString()!==b.toString()){return false}break;default:if(a.toString()!==b.toString()){return false}}return true}}if(typeof util.removeEqual==="undefined"){util.removeEqual=function(a,b,ignoreDiffKeys){var p,remove,removeTmp;if(!ignoreDiffKeys){ignoreDiffKeys=[]}if(a===undefined||b===undefined){return}switch(typeof a){case"object":remove=true;for(p in a){if(a.hasOwnProperty(p)){if($.inArray(p,ignoreDiffKeys)>-1){removeTmp=true}else{removeTmp=util.removeEqual(a[p],b[p])}if(removeTmp){delete a[p];delete b[p]}remove=remove&&removeTmp}}return remove;default:return a.toString()===b.toString()}}}util.loadDomData=function(element,namespace,aKey){$.each(aKey,function(i,key){var data=element.data(key);if(typeof data!=="undefined"&&data!==null){namespace[key]=data}})};util.loadDomToggleData=function(element,namespace,aKey){$.each(aKey,function(i,key){var data=element.data(key);namespace[key]=typeof data==="undefined"||data===null?!!namespace[key]:data!==false})}})(jQuery);(function($){"use strict";$.fn.caret=function(begin,end){if(this.length===0){return this}var input=this[0],range;if(typeof begin==="number"){if(!$(input).is(":visible")){return input}end=typeof end==="number"?end:begin;if(input.setSelectionRange){input.focus();input.setSelectionRange(begin,end);try{if(end===input.value.length){input.scrollLeft=9999999999}}catch(err){}}else if(input.createTextRange){range=input.createTextRange();range.collapse(true);range.moveEnd("character",end);range.moveStart("character",begin);range.select()}}else{if(!$(input).is(":visible")){var l=$(input).val().length;return{begin:l,end:l}}if(input.setSelectionRange){begin=input.selectionStart;end=input.selectionEnd}else if(document.selection&&document.selection.createRange){range=document.selection.createRange();begin=-range.duplicate().moveStart("character",-1e5);end=begin+range.text.length}return{begin:begin,end:end}}return input}})(jQuery);(function($){"use strict";var util=$.formBuilder.util;var dict=$.formBuilder.lang.dict;var arrayFieldId=0;var nextArrayFieldId=function(){return arrayFieldId++};$.widget("formBuilder.arrayField",{_arrayFieldTemplate:'<div class="array-field">'+'<div class="items"><div class="items-content"></div></div>'+'<div class="input-field">'+'<div class="field-items">'+'<span class="first field-item addon clickable array-field-add noselect"><a href="#">+</a></span>'+'<span class="field-item array-field-add-message"></span>'+"</div>"+"</div>"+"</div>",_arrayFieldItemTemplate:'<div class="input-field-group array-field-item">'+'<div class="input-field">'+'<div class="field-items">'+'<span class="first field-item addon clickable sort-handle noselect">::</span>'+"</div>"+"</div>"+'<span class="sub-field"></span>'+'<div class="input-field">'+'<div class="field-items">'+'<span class="field-item addon clickable array-field-delete">'+'<span class="fb-icon fb-icon-remove" title="'+dict.remoasdase+'"></span>'+"</span>"+"</div>"+"</div>"+"</div>",_create:function(){var self=this,e=self.element;self.subField=e.html();self.id=nextArrayFieldId();e.html(self._arrayFieldTemplate);if(e.attr("data-addmessage")){e.find(".array-field-add-message").text(e.attr("data-addmessage"))}var items=self.items=e.find(".items");self.itemsContent=items.find(".items-content");e.on("click",".array-field-add, .array-field-add-message",function(ev){ev.preventDefault();ev.stopPropagation();self._handleAddButtonClick()});e.on("click",".array-field-delete",function(ev){ev.preventDefault();ev.stopPropagation();$(this).parents(".array-field-item").first().remove();self._onDirty();self._trigger("afterdelete",ev)});self.itemsContent.sortable({axis:"y",handle:".sort-handle",containment:self.itemsContent,tolerance:"pointer",stop:function(){self._checkDirty()}});self.dirty=false;e.on("dirty clean",function(ev){if(!$(ev.target).childOf(e)){return}ev.stopPropagation();if(ev.type==="dirty"){self._onDirty()}else{self._onClean()}})},getId:function(){return this.id},_handleAddButtonClick:function(){var self=this;if(self._trigger("beforeaddnewitem")){self.addItem()}},_checkDirty:function(){var self=this,curData=self.data,newData=self.get();if(util.equals(newData,curData)){self.dirty=false;self.element.trigger("clean")}else{self.dirty=true;self.element.trigger("dirty")}},_onDirty:function(){var self=this;if(self.dirty){return}self._checkDirty()},_onClean:function(){var self=this;if(!self.dirty){return}self._checkDirty()},isDirty:function(){return this.dirty},getFieldInstances:function(){var self=this,itemsContent=self.itemsContent,fields=[];itemsContent.children(".array-field-item").each(function(){fields.push($(this).find(".array-field-input-"+self.id))});return fields},get:function(){var self=this,subWidget=self.element.attr("data-sub-widget")||"inputField",itemsContent=self.itemsContent,data=[];itemsContent.children(".array-field-item").each(function(){var val=$(this).find(".array-field-input-"+self.id)[subWidget]("get");if(val===0||val){data.push(val)}});return data},validate:function(){var self=this,itemsContent=self.itemsContent,valid=true;itemsContent.find(".sub-field").each(function(){valid=valid&&$(this).find(":formBuilder-inputField").inputField("validate")});return valid},clearDirty:function(){var self=this,itemsContent=self.itemsContent;self.dirty=false;itemsContent.find(".sub-field").each(function(){$(this).find(":formBuilder-inputField").inputField("clearDirty")})},clear:function(){var self=this;self.set([])},flash:function(){var self=this,itemsContent=self.itemsContent;itemsContent.find(".sub-field").each(function(){$(this).find(":formBuilder-inputField").inputField("flash")})},set:function(data){var self=this,items=self.items,content=self.itemsContent;self._empty();if(!$.isArray(data)){data=[]}self.data=data;$.each(data,function(i,item){content.append(self.drawItem(item))})},_empty:function(){var self=this,content=self.itemsContent;content.children().remove()},addItem:function(index,item){var self=this,itemEl=self.drawItem(item),content=self.itemsContent;if((index||index===0)&&index>=0){content.children().eq(index).before(itemEl)}else{content.append(itemEl)}self._trigger("afteradd",null,itemEl);return itemEl||null},drawItem:function(item){var self=this,subWidget=self.element.attr("data-sub-widget"),itemView=$(self._arrayFieldItemTemplate);if(subWidget){self._drawWidgetItem(item,itemView,subWidget)}else{self._drawInternalMarkupItem(item,itemView)}return itemView},_drawInternalMarkupItem:function(item,itemView){var self=this,field=$(self.subFieldMarkup());self._trigger("beforeadd",null,field);itemView.find(".sub-field").html(field);field.parent().find("input[type!=submit], select, textarea, [data-load-widget-as-field]").inputField().inputField("set",item).addClass("array-field-input-"+self.id)},_drawWidgetItem:function(item,itemView,subWidget){var self=this,field=$("<div/>")[subWidget]();self._trigger("beforeadd",null,field);itemView.find(".sub-field").append(field);field[subWidget]("set",item).addClass("array-field-input-"+self.id).css("display","inline")},subFieldMarkup:function(){return this.subField},_destroy:function(){var self=this;self._empty();self.element.empty();self.element.html(self.subField)}})})(jQuery);(function($){"use strict";var dict=$.formBuilder.lang.dict;$.widget("formBuilder.dateRangePicker",{_dateRangePickerTemplate:'<div class="date-range-picker form">'+'<input type="text" name="from" data-type="date" data-label="'+dict.from+'"/>'+'<input type="text" name="to" data-type="date" data-label="'+dict.to+'"/>'+'<button type="button" class="previous-range">&lt;&lt;</button>'+'<div class="input-field-group range-select">'+'<select name="range" style="width: 138px;">'+'<option value="custom">'+dict.custom+"</option>"+'<option value="day">'+dict.day+"</option>"+'<option value="week">'+dict.week+"</option>"+'<option value="month">'+dict.month+"</option>"+'<option value="year">'+dict.year+"</option>"+"</select>"+"</div>"+'<button type="button" class="next-range">&gt;&gt;</button>'+"</div>",_create:function(){var self=this,e=self.element;var form=self.form=$("<div></div>").html(self._dateRangePickerTemplate).find(".date-range-picker").formBuilder();e.append(form);self.fromDate=form.find('input[name="from"]').on("keyup ondateselect",function(){$(self.range).val("custom")});self.toDate=form.find('input[name="to"]').on("keyup ondateselect",function(){$(self.range).val("custom")});form.find("button.previous-range").button().on("click",function(){self._moveRange(-1,$(self.range).val())});form.find("button.next-range").button().on("click",function(){self._moveRange(1,$(self.range).val())});self.range=form.find('select[name="range"]').on("change",function(){self.setRange($(this).val())})},_moveRange:function(number,unit){var self=this,fromDate=self.fromDate.inputField("get");if(!fromDate||unit==="custom"){return}fromDate=self.deserialize(fromDate);var begin=fromDate.add(number,unit);var end=moment(begin).add(1,unit).subtract(1,"day");self._setFromAndTo(begin,end)},setRange:function(range){var self=this;if(range==="custom"){return}var fromDate=self.fromDate.inputField("get");if(!fromDate){fromDate=moment()}if(typeof fromDate==="string"){fromDate=self.deserialize(fromDate)}var from=fromDate.startOf(range);var to=moment(from).endOf(range);self._setFromAndTo(from,to)},_setFromAndTo:function(from,to){var self=this;if(typeof from!=="string"){from=self.serialize(from)}if(typeof to!=="string"){to=self.serialize(to)}self.fromDate.inputField("set",from);self.toDate.inputField("set",to)},serialize:function(momentDate){if(!momentDate){return}return momentDate.format("YYYY-MM-DD")},deserialize:function(sDate){if(!sDate){return}return moment(sDate,"YYYY-MM-DD")},get:function(){var self=this;return self.form.formBuilder("get")},set:function(data){var self=this;self.form.formBuilder("set",data)},isDirty:function(){return this.form.formBuilder("isDirty")},clearDirty:function(){var self=this;self.form.formBuilder("clearDirty")},clear:function(){var self=this;self.set({from:"",to:"",range:"custom"})},validate:function(){var self=this,e=self.element,form=self.form;if(!form.formBuilder("validate")){return false}}})})(jQuery);(function($){"use strict";var dict=$.formBuilder.lang.dict;$.widget("formBuilder.dateTimeRangePicker",{_dateTimeRangePickerTemplate:'<div class="date-range-picker form">'+'<input type="text" name="from" data-type="dateTime" data-label="'+dict.from+'"/>'+'<input type="text" name="to" data-type="dateTime" data-label="'+dict.to+'"/>'+'<button type="button" class="previous-range">&lt;&lt;</button>'+'<div class="input-field-group range-select">'+'<select name="range" style="width: 138px;">'+'<option value="custom">'+dict.custom+"</option>"+'<option value="day">'+dict.day+"</option>"+'<option value="week">'+dict.week+"</option>"+'<option value="month">'+dict.month+"</option>"+'<option value="year">'+dict.year+"</option>"+"</select>"+"</div>"+'<button type="button" class="next-range">&gt;&gt;</button>'+"</div>",_create:function(){var self=this,e=self.element;var form=self.form=$("<div></div>").html(self._dateTimeRangePickerTemplate).find(".date-range-picker").formBuilder();e.append(form);self.fromDate=form.find('input[name="from"]').on("keyup ondateselect",function(){$(self.range).val("custom")});self.toDate=form.find('input[name="to"]').on("keyup ondateselect",function(){$(self.range).val("custom")});form.find("button.previous-range").button().on("click",function(){self._moveRange(-1,$(self.range).val())});form.find("button.next-range").button().on("click",function(){self._moveRange(1,$(self.range).val())});self.range=form.find('select[name="range"]').on("change",function(){self.setRange($(this).val())})},_moveRange:function(number,unit){var self=this,fromTypeInstance=self.fromDate.inputField("getType"),toTypeInstance=self.toDate.inputField("getType"),fromDate;if(fromTypeInstance.dateWidgetInstance.isEmpty()||unit==="custom"){return}fromDate=self.deserializeDate(fromTypeInstance.dateWidgetInstance.get());var begin=fromDate.add(number,unit);var end=moment(begin).add(1,unit).subtract(1,"day");fromTypeInstance.dateWidgetInstance.set(self.serializeDate(begin));toTypeInstance.dateWidgetInstance.set(self.serializeDate(end));if(fromTypeInstance.timeWidgetInstance.isEmpty()){fromTypeInstance.timeWidgetInstance.set(moment().hours(0).minutes(0).utc().format("HH:mm"))}if(toTypeInstance.timeWidgetInstance.isEmpty()){toTypeInstance.timeWidgetInstance.set(moment().hours(23).minutes(59).utc().format("HH:mm"))}},setRange:function(range){var self=this,fromTypeInstance=self.fromDate.inputField("getType"),toTypeInstance=self.toDate.inputField("getType"),fromDate;if(range==="custom"){return}fromDate=fromTypeInstance.dateWidgetInstance.get();if(!fromDate){fromDate=moment()}if(typeof fromDate==="string"){fromDate=self.deserializeDate(fromDate)}var from=fromDate.startOf(range);var to=moment(from).endOf(range);fromTypeInstance.dateWidgetInstance.set(self.serializeDate(from));toTypeInstance.dateWidgetInstance.set(self.serializeDate(to));if(fromTypeInstance.timeWidgetInstance.isEmpty()){fromTypeInstance.timeWidgetInstance.set(moment().hours(0).minutes(0).utc().format("HH:mm"))}if(toTypeInstance.timeWidgetInstance.isEmpty()){toTypeInstance.timeWidgetInstance.set(moment().hours(23).minutes(59).utc().format("HH:mm"))}self.range.val(range)},serializeDate:function(momentDate){if(!momentDate){return}return momentDate.format("YYYY-MM-DD")},deserializeDate:function(stringDate){if(!stringDate){return}return moment(stringDate,"YYYY-MM-DD")},get:function(){var self=this;return self.form.formBuilder("get")},set:function(data){var self=this;self.form.formBuilder("set",data)},isDirty:function(){return this.form.formBuilder("isDirty")},clearDirty:function(){var self=this;self.form.formBuilder("clearDirty")},clear:function(){var self=this;self.set({from:"",to:"",range:"custom"})},validate:function(){var self=this,e=self.element,form=self.form;if(!form.formBuilder("validate")){return false}}})})(jQuery);(function($){"use strict";var doc=$(document);var dropDownPanelCount=0;$.widget("formBuilder.dropDownPanel",{options:{offset:{top:0,left:0},target:undefined,focusTarget:undefined,targetInput:true,hideFields:undefined},_create:function(){var self=this,o=self.options,e=self.element,wrapper=$('<div class="fb-dropDownPanel-wrapper" style="position: relative;"></div>'),panel=$('<div class="fb-dropDownPanel"></div>').hide().appendTo(wrapper);self.wrapper=wrapper;self.panel=panel;self.isOpen=false;self.id=dropDownPanelCount++;o.targetInput=!!o.targetInput;e.addClass("fb-dropDownPanel-content").appendTo(panel);if(o.hideFields&&Array.isArray(o.hideFields)){$.each(o.hideFields,function(i,fieldName){panel.find('[name="'+fieldName+'"]').remove()})}self.closeListener=function(ev){if(ev.which===27){ev.preventDefault();ev.stopPropagation();self.focusTarget.focus();setTimeout(function(){self.close()},0);return}if(!$(ev.target).childOf(panel,true)&&!$(ev.target).childOf(self.focusTarget,true)){setTimeout(function(){self.close()},0)}};self.openListener=function(ev){setTimeout(function(){self.open()},0)};self.attach(o.target,o.focusTarget)},getClassNames:function(){var self=this;return{target:"fb-dropDownPanel-"+self.id+"-target",focus:"fb-dropDownPanel-"+self.id+"-focusTarget"}},getId:function(){return this.id},isOpened:function(){return this.isOpen},detach:function(){var self=this,instanceClasses=self.getClassNames();self.close();if(self.target){self.target.removeClass(instanceClasses.target)}if(self.focusTarget){self.focusTarget.removeClass(instanceClasses.focus);self.focusTarget.off("click focus",self.openListener)}self.focusTarget=undefined;self.target=undefined;self.wrapper.detach()},attach:function(newTarget,newFocusTarget){var self=this,o=self.options,instanceClasses=self.getClassNames();if(!newTarget||!(newTarget instanceof $)||newTarget.length===0){throw"[dropDownPanel] No target element specifed."}if(self.target){self.detach()}if(newTarget.is(":formBuilder-inputField")){if(!newFocusTarget){newFocusTarget=newTarget}newTarget=newTarget.closest(".input-field")}else if(newTarget.is(".input-field")&&!newFocusTarget){newFocusTarget=newTarget.find(":focusable:tabbable")}else{self.wrapper.insertAfter(newTarget)}if(newTarget.is(".input-field")){self.wrapper.appendTo(newTarget.closest(".input-field-group"));if(o.targetInput){var inputItem=newTarget.find(".field-item-input");if(inputItem.length>0){newTarget=$(inputItem[0])}}}if(!newFocusTarget){newFocusTarget=newTarget}if(self.target){self.target.removeClass(instanceClasses.target)}if(self.focusTarget){self.focusTarget.removeClass(instanceClasses.focus);self.focusTarget.off("click focus",self.openListener)}self.target=newTarget;self.focusTarget=newFocusTarget;self.target.addClass(instanceClasses.target);self.focusTarget.addClass(instanceClasses.focus);self.focusTarget.on("click focus",self.openListener)},open:function(){var self=this,o=self.options,panel=self.panel,e=self.element;if(self.isOpen||!self.target){return}self.isOpen=true;var wrapperOffset=self.wrapper.offset();var targetOffset=self.target.offset();var css={left:targetOffset.left-wrapperOffset.left+o.offset.left+"px",top:targetOffset.top+self.target.outerHeight()-wrapperOffset.top+o.offset.top+"px",width:self.target.outerWidth()-(self.panel.outerWidth()-self.panel.width())+"px"};panel.css(css);panel.children().css({maxWidth:css.width,overflow:"hidden"});if(!self._trigger("beforeopen",null,[panel,css])){return}panel.show();doc.on("click keyup",self.closeListener);self._trigger("afteropen")},close:function(){var self=this,panel=self.panel;if(!self.isOpen){return}if(!self._trigger("beforeclose")){return}self.isOpen=false;panel.hide();doc.off("click keyup",self.closeListener);self._trigger("afterclose")},_destroy:function(){var self=this;doc.off("click keyup",self.closeListener);self.wrapper.remove()}})})(jQuery);(function($){"use strict";var util=$.formBuilder.util;$.widget("formBuilder.formBuilder",{options:{converter:{fromForm:function(data){return data},toForm:function(data){return data}},ignoreHidden:false,defaultRequired:false,loadHidden:true},_create:function(){var self=this,o=self.options,e=self.element;util.loadDomToggleData(e,o,["ignoreHidden","defaultRequired","loadHidden"]);if(o.loadHidden){e.hide()}self.baseData={};self.fieldsWidgets=$([]);self.fields=$([]);self.scanForNewFields();self.dirty=false;e.on("dirty",function(ev){if(self.dirty){ev.stopPropagation();return}self.dirty=true}).on("clean",function(ev){if(!self.dirty){ev.stopPropagation();return}self.dirty=self.isDirty();if(self.dirty){ev.stopPropagation()}});if(o.loadHidden){e.show()}},scanForNewFields:function(){var self=this,o=self.options,e=self.element;e.find("[data-load-widget-as-field]").each(function(){var el=$(this);if(!el.attr("name")){throw new Error("data-load-widget-as-field must have name attribute")}if(self.fieldsWidgets.has(el[0]).length){return}var widgetName=el.attr("data-load-widget-as-field");if(!widgetName||!$.isFunction(el[widgetName])){throw new Error('Cannot load widget "'+widgetName+'" as field, it does not exist')}el[widgetName]();self.fieldsWidgets=self.fieldsWidgets.add(el);var label=el.attr("data-label");if(!label){return}el.addClass("field-items").wrap('<div class="input-field-group"><div class="input-field"></div></div>').before("<label>"+label+"</label>")});e.find('input[type="checkbox"]').not(":formBuilder-selectionField").not(".form-builder-ignore *").not("[data-load-widget-as-field]").not("[data-load-widget-as-field] *").each(function(){var el=$(this);el.selectionField({required:o.defaultRequired});self.fieldsWidgets=self.fieldsWidgets.add(el)});var radios=e.find('input[type="radio"]').not(":formBuilder-selectionField").not(".form-builder-ignore *").not("[data-load-widget-as-field]").not("[data-load-widget-as-field] *");radios.each(function(){var el=$(this);if(el.is(":formBuilder-selectionField")){return}var radioGroup=radios.filter('[name="'+this.name+'"]');radioGroup.each(function(){$(this).selectionField({required:o.defaultRequired,radioGroup:radioGroup})});self.fieldsWidgets=self.fieldsWidgets.add(el)});e.find('input[type!=submit][type!="checkbox"][type!="radio"], select, textarea').not(":formBuilder-inputField").not(":formBuilder-selectionField").not(".form-builder-ignore *").not("[data-load-widget-as-field]").not("[data-load-widget-as-field] *").each(function(){var newInput=$(this);newInput.inputField({required:o.defaultRequired});self.fields=self.fields.add(newInput)});e.find(".input-field-group").each(function(){$(this).find(".field-item:first").addClass("first")})},_proxyCommandToWidget:function(widgetElement,ignoreInvalid){var self=this,method=Array.prototype.splice.call(arguments,2,1),args=Array.prototype.slice.call(arguments,2),widgetName,instance;if(widgetElement.is(":formBuilder-inputField")){widgetName="formBuilderInputField"}else if(widgetElement.is(":formBuilder-selectionField")){widgetName="formBuilderSelectionField"}else{widgetName=widgetElement.data("load-widget-as-field")}instance=widgetElement.data(widgetName);if(ignoreInvalid&&(!widgetName||!instance||!instance[method])){return}try{return instance[method].apply(instance,args)}catch(err){throw new Error("ERROR: widget field error NAME["+widgetName+"] METHOD["+method+"]")}},isDirty:function(){var self=this,dirty=false;self.fields.each(function(){dirty=!!$(this).inputField("isDirty");return!dirty});if(dirty){return dirty}self.fieldsWidgets.each(function(){dirty=!!self._proxyCommandToWidget($(this),false,"isDirty");return!dirty});return dirty},clearDirty:function(){var self=this;self.dirty=false;self.fields.each(function(){$(this).inputField("clearDirty")});self.fieldsWidgets.each(function(){self._proxyCommandToWidget($(this),false,"clearDirty")})},flashDirty:function(numberOfTimes){},flashError:function(numberOfTimes){var self=this;this.fields.filter(function(){return $(this).data("inputField").options.error}).inputField("flash",numberOfTimes)},disable:function(){var self=this;this.fields.inputField("status","disable",true);self.fieldsWidgets.each(function(){self._proxyCommandToWidget($(this),true,"status","disabled",true)})},enable:function(){var self=this;self.fields.inputField("status","disable",false);self.fieldsWidgets.each(function(){self._proxyCommandToWidget($(this),true,"status","disabled",false)})},get:function(){var self=this,o=self.options,formData=self._readDataFromDom();if($.isFunction(o.converter.fromForm)){formData=o.converter.fromForm(formData)}if(!formData){formData={}}return formData},clear:function(){var self=this,o=self.options;self.baseData={};self.fields.each(function(){$(this).inputField("clear")});self.fieldsWidgets.each(function(){self._proxyCommandToWidget($(this),false,"clear")})},conflicts:function(data,ignoreKeys){var self=this,formData=self._convertFormData(data),conflicts=[];if(!self.isDirty()){return}var aData=$.extend(true,{},self.baseData),bData=$.extend(true,{},formData);util.removeEqual(aData,bData,ignoreKeys);self.fields.each(function(){var fieldElement=$(this),fieldName=fieldElement.attr("name");var conflict=fieldElement.inputField("conflicts",formData[fieldName]);if(conflict){conflicts.push(conflict)}});self.fieldsWidgets.each(function(){var conflict=self._proxyCommandToWidget($(this),false,"conflicts",formData);if(conflict){if($.isArray(conflict)){conflicts.concat(conflict)}else{conflicts.push(conflict)}}});if(conflicts.length){return conflicts}else{return false}},set:function(data,setOptions){var self=this,formData=self._convertFormData(data);self._trigger("beforeset",null,formData);self._writeDataToDom(formData,setOptions);self._trigger("afterset",null,formData)},_convertFormData:function(data){var self=this,o=self.options;var formData=$.extend(true,{},data||{});if($.isFunction(o.converter.toForm)){formData=o.converter.toForm(formData)}return formData},validate:function(){var self=this,o=self.options,valid=true;self.fields.each(function(){var el=$(this);if((!self.ignoreHidden||el.is(":visible"))&&el.inputField("validate")===false){valid=false}});self.fieldsWidgets.each(function(){var el=$(this);if((!self.ignoreHidden||el.is(":visible"))&&self._proxyCommandToWidget(el,false,"validate")===false){valid=false}});return valid},_destroy:function(){var self=this;self.fields.inputField("destroy");self.fieldsWidgets.each(function(){self._proxyCommandToWidget($(this),false,"destroy")})},getFields:function(){return this.fields},_writeDataToDom:function(data,setOptions){var self=this,o=self.options;self.fields.each(function(){$(this).inputField("set",util.selectPath(data,$(this).attr("name")),setOptions)});self.fieldsWidgets.each(function(){self._proxyCommandToWidget($(this),false,"set",util.selectPath(data,$(this).attr("name")),setOptions)})},_readDataFromDom:function(){var self=this,ignoreHidden=self.options.ignoreHidden,data={};self.fields.each(function(){var el=$(this);if(ignoreHidden&&!el.is(":visible")){return}var val=el.inputField("get");if($.isArray(val)){val=val[0]}util.insertPath(data,el.attr("name"),val)});self.fieldsWidgets.each(function(){var el=$(this),ignoreHidden=self.options.ignoreHidden;if(ignoreHidden&&!el.is(":visible")){return}var val=self._proxyCommandToWidget(el,false,"get");util.insertPath(data,el.attr("name"),val)});return data}})})(jQuery);(function($){"use strict";var util=$.formBuilder.util;var dict=$.formBuilder.lang.dict;var repeat=function(work,delay,count,idx){idx=idx||0;if(idx<count){work();setTimeout(function(){repeat(work,delay,count,idx+1)},delay)}};var statusNames=["require","disable","error","hover","warn","focus"];$.widget("formBuilder.fieldWidget",{isDirty:function(){return false},validate:function(){return true},clearDirty:function(){},clear:function(){this.set()},flash:function(){},set:function(data){},get:function(){return null}});$.widget("formBuilder.inputField",{options:{type:"text",label:"",require:"",required:"",placeholder:"",min:"",max:"",error:"error"},_create:function(){var self=this,o=self.options,e=self.element;if(!e.is("input[type!=submit], select, textarea")){throw new Error("invalid element")}self.dirty=false;util.loadDomData(e,o,["empty","placeholder","type","label","min","max","preinput","postinput","suffix","prefix"]);

util.loadDomToggleData(e,o,["require","required"]);o.require=o.require||o.required;if(!o.placeholder&&o.empty){o.placeholder=o.empty}var tooltip,tooltipContent=e.next();if(tooltipContent.is("div.form-input-tooltip")||tooltipContent.is("div.tooltip")){tooltip=tooltipContent}var field=self.field=$('<div class="input-field"><div class="field-items"><span class="field-item field-item-input"></span></div></div>');var layers=self.layers={items:field.find(".field-items"),input:field.find(".field-item-input")};if(o.label){self.setLabel(o.label)}e.before(field).appendTo(layers.input);field.attr("class",$.trim(field.attr("class"))+" "+$.trim(e.attr("class")));e.removeAttr("class");if(e.is("textarea")){field.addClass("textarea-fix");e.wrap('<div class="textarea-wrapper"></div>')}if(e.is("select")){field.addClass("select-fix")}var parentContainer=field.closest(".input-field-group, :formBuilder-formBuilder");if(!parentContainer.length||parentContainer.is(":formBuilder-formBuilder")){field.wrap('<div class="input-field-group"/>');field.find(".field-item:first").addClass("first")}if(o.placeholder){self.placeholder(o.placeholder)}if(o.preinput){self.addOn(-1,o.preinput)}if(o.postinput){self.addOn(1,o.postinput)}if(o.suffix){self.setSuffix(o.suffix)}if(o.prefix){self.setPrefix(o.prefix)}if(tooltip){var addon=self.addOn(1e3,'<span class="tooltip noselect">?</span>',"clickable");field.addClass("has-tooltip");tooltip.popOver({target:addon,onShow:function(){addon.addClass("open")},onHide:function(){addon.removeClass("open")}}).on("click",function(){e.focus()});tooltip.popOver("hide");addon.on("click",function(){tooltip.popOver("toggle")})}layers.input.on("mousedown.inputField",function(){$("body").one("mouseup.inputField",function(){e.focus()})});self.autoValidate="blur";self.states={};self.status("require",o.require,false);e.focus(function(){self.status("focus",true)}).blur(function(ev){self.status("focus",false);self._onBlur(ev)}).change(function(ev){self._onKeyup(ev)}).on("inputfilterkeyignored.inputField",function(){self.flash()}).on("inputfilterkeytyped.inputField",function(){if(self.suffixShim){self.suffixShim.text(self.element.val())}}).on("keyup",function(ev){self._onKeyup(ev)}).on("keydown",function(ev){self._onKeydown(ev)});field.mouseenter(function(){self.status("hover",true)}).mouseleave(function(){self.status("hover",false)});self.setType(o.type);self.prevValue=e.val();if(o.max){self.setMax(o.max)}},setLabel:function(label){var self=this,field=self.field;if(!self.label){self.label=$("<label>"+label+"</label>");self.label.prependTo(field)}self.label.html(label)},setSuffix:function(t){var self=this,o=self.options,layers=self.layers;if(o.prefix){var space="&nbsp;&nbsp;&nbsp;&nbsp;";var pre=o.prefix;var i;for(i=0;i<pre.length;i++){space=space+"&nbsp;"}t=space+t}if(!layers.suffix){layers.suffix=$('<div class="suffix-overlay"><div class="shim"></div><span class="value noselect">'+t+"</span></div>").prependTo(layers.items);self.suffixShim=layers.suffix.find(".shim")}else{layers.suffix.find(".value").text(t)}},setPrefix:function(t){var self=this,layers=self.layers;if(!layers.prefix){layers.prefix=$('<div class="prefix-overlay noselect">'+t+"</div>").prependTo(layers.items)}else{self.layers.prefix.find(".value").text(t)}},setMax:function(max){var self=this,e=self.element;if(e.is(":formBuilder-inputFilter")){e.inputFilter("setMax",max)}else{e.inputFilter({toUpper:false,max:max,pattern:/./})}},_onKeydown:function(ev){var self=this;self._showLayer("placeholder",false)},_onKeyup:function(ev){var self=this;if(self.autoValidate==="keyup"){setTimeout(function(){self.validate(true)},0)}self.checkDirty();self.redraw()},checkDirty:function(){var self=this,e=self.element;if(!self.dirty){var val=self.get();if(!util.equals(self.prevValue,val)&&!(typeof self.prevValue==="undefined"&&val==="")){e.trigger("dirty");self.dirty=true}}else{if(self.cleanCheckTimer){clearTimeout(self.cleanCheckTimer)}self.cleanCheckTimer=setTimeout(function(){var prev=self.prevValue,val=self.get();if(prev!==0&&(!prev||$.isEmptyObject(prev))){prev=""}if(val!==0&&(!val||$.isEmptyObject(val))){val=""}if(util.equals(prev,val)){self.dirty=false;e.trigger("clean");self.redraw()}},300)}},isDirty:function(){return this.dirty},_onBlur:function(ev){var self=this;if(self.autoValidate==="blur"){setTimeout(function(){self.validate(true)},0)}},addOn:function(weight,html,className){var self=this,layers=self.layers;if(typeof weight!=="number"){weight=0}var addon=$('<span data-weight="'+weight+'" class="field-item addon">'+html+"</span>");if(className){addon.addClass(className)}var pre=true,found=false;layers.items.children().each(function(){var el=$(this);if(el.hasClass("field-item-input")){pre=false;return}var eWeight=el.data("weight");if(typeof eWeight!=="number"){eWeight=0}if(pre&&weight<0&&weight<=eWeight){addon.insertBefore(el);found=true;layers.items.find(".field-item.first").not(":first").removeClass("first");layers.items.find(".field-item").filter(":first").addClass("first");return false}else if(!pre&&weight>=0&&weight<=eWeight){addon.insertBefore(el);found=true;return false}});if(!found&&weight<0){layers.items.find(".field-item-input").before(addon);layers.items.find(".field-item.first").not(":first").removeClass("first");layers.items.find(".field-item").filter(":first").addClass("first")}else if(!found){layers.items.append(addon)}return addon},placeholder:function(s){var self=this,layers=self.layers;if(!layers.placeholder){layers.placeholder=$('<div class="placeholder noselect"></div>').hide().appendTo(layers.input)}layers.placeholder.text(s)},_init:function(){var self=this;self.set(self.element.attr("value"))},clear:function(){var self=this,type=self.type;self.clearDirty();if(type&&$.isFunction(type.clear)){type.clear.call(type,self)}else{self.prevValue="";self.set("")}},clearDirty:function(){var self=this;if(self.cleanCheckTimer){clearTimeout(self.cleanCheckTimer)}self.dirty=false;self.field.removeClass("dirty");self.element.trigger("clean")},conflicts:function(value){var self=this;if(self.dirty){return{key:self.element.attr("name"),vOld:self.get(),vNew:value}}return null},set:function(value,setOptions){var self=this,e=self.element;var val;setOptions=$.extend({autoClean:true},setOptions);if(setOptions.autoClean){self.prevValue=value;self.clearDirty()}if(self.hasStatus("error")){self.status("error",false,false)}val=self._formatToField(value);if(typeof val!=="undefined"){e.val(val)}var f=e.data("inputFilter");if(f){f._clean()}self._trigger("afterset",null,[val,value]);self.redraw()},get:function(){var self=this,e=self.element;return self._formatFromField(e.val())},value:function(value){var self=this;if(value===undefined){return self.get()}else{return self.set(value)}},isEmpty:function(){var self=this,type=self.type;if($.isFunction(type.isEmpty)){return type.isEmpty.call(type,self)}return $.trim(self.element.val())===""},validate:function(skipRequired){var self=this,states=self.states,type=self.type,empty=self.isEmpty();if(!skipRequired&&states.require&&empty){self.setError({message:dict.required});return false}if(empty){self.clearError();return true}if($.isFunction(type.validate)){var err=type.validate.call(type,self);if(typeof err==="undefined"){self.clearError();return true}else{self.setError(err);return false}}self.clearError();return true},flash:function(numberOfTimes){var self=this,o=self.options;repeat(function(){self.field.addClass("flash");self.flashTimer=setTimeout(function(){self.field.removeClass("flash")},150)},150,numberOfTimes||1)},setError:function(err){var self=this,error=self.states.error,layers=self.layers;if(err===undefined){self.clearError();return}if(!layers.error){layers.error=$('<div class="error-overlay noselect"></div>').appendTo(layers.input)}layers.error.text(err.message);self.status("error",true);self.autoValidate="keyup"},clearError:function(){var self=this;if(!self.states.error){return}self.autoValidate="blur";self.status("error",false)},_formatToField:function(value){var self=this,type=self.type;if(value===null||value===undefined){return value}if(!type||!type.converter||!$.isFunction(type.converter.toField)){return value}return type.converter.toField.call(type,value,self)},_formatFromField:function(value){var self=this,type=self.type;if(!type||!type.converter||!$.isFunction(type.converter.fromField)){return value}return type.converter.fromField.call(type,value,self)},redraw:function(){var self=this,e=self.element,o=self.options,hasVal=!!e.val(),showError=false,showNotice=true,showPlaceholder=true,layers=self.layers;if(hasVal){showPlaceholder=false}if(self.suffixShim&&!showPlaceholder){self.suffixShim.text(e.val())}var valWidth;if(layers.prefix){if(!showPlaceholder){if(!self.prefixPaddingAdded){self.startInputWidth=e.width();self.startPaddingLeft=parseInt(e.css("padding-left"),10);self.startPaddingLeft=isNaN(self.startPaddingLeft)?5:self.startPaddingLeft;if(!(layers.prefix&&layers.suffix)){e.css({paddingLeft:self.startPaddingLeft+layers.prefix.outerWidth()+"px",width:self.startInputWidth-layers.prefix.outerWidth()+"px"})}else{valWidth=layers.suffix.find(".value").outerWidth();self.startPaddingRight=e.css("padding-right").replace("[^0-9]","");self.startPaddingRight=isNaN(self.startPaddingRight)?0:parseInt(self.startPaddingRight,10);e.css({paddingLeft:self.startPaddingLeft+layers.prefix.outerWidth()+"px",paddingRight:self.startPaddingRight+valWidth-layers.prefix.outerWidth()+"px",width:self.startInputWidth-valWidth+"px"});self.suffixShim.css({maxWidth:self.startInputWidth-valWidth+"px"});self.suffixPaddingAdded=true}self.prefixPaddingAdded=true}}else{e.css({paddingLeft:self.startPaddingLeft,width:self.startInputWidth+"px"});self.prefixPaddingAdded=false}}if(layers.suffix){if(!showPlaceholder){if(!self.suffixPaddingAdded){valWidth=layers.suffix.find(".value").outerWidth();self.startInputWidth=e.width();self.startPaddingRight=e.css("padding-right").replace("[^0-9]","");self.startPaddingRight=isNaN(self.startPaddingRight)?0:parseInt(self.startPaddingRight,10);e.css({paddingRight:self.startPaddingRight+valWidth+"px",width:self.startInputWidth-valWidth+"px"});self.suffixShim.css({maxWidth:self.startInputWidth-valWidth+"px"});self.suffixPaddingAdded=true}}else{e.css({paddingRight:self.startPaddingRight,width:self.startInputWidth+"px"});self.suffixPaddingAdded=false}}if(self.states.error){showNotice=false;showError=true}if(self.dirty){self.field.addClass("dirty")}else{self.field.removeClass("dirty")}self._showLayer("error",showError);self._showLayer("notice",showNotice);self._showLayer("placeholder",showPlaceholder);self._showLayer("suffix",!showPlaceholder);self._showLayer("prefix",!showPlaceholder)},_showLayer:function(layer,show){var self=this,e=self.element;if(!self.layers[layer]){return}if(show){if(layer==="suffix"){self.layers[layer].css("visibility","visible")}else{self.layers[layer].show()}if(layer==="placeholder"&&e.width()>0){var ph=self.layers[layer];while(ph.outerWidth(true)>e.width()&&parseFloat(ph.css("font-size"),10)>=8){ph.css("font-size","-=1.0")}}}else{if(layer==="suffix"){self.layers[layer].css("visibility","hidden")}else{self.layers[layer].hide()}}},setType:function(sType){var self=this,types=$.formBuilder.inputField.types,type=self.type;if(type&&$.isFunction(type.tearDown)){type.tearDown().call(type,self)}if(!sType||!types[sType]){sType="text"}type=Object.create(types[sType]);if($.isFunction(type.setUp)){type.setUp.call(type,self)}self.type=type},getType:function(){return this.type},hide:function(){this.field.hide()},show:function(displayValue){if(displayValue){this.field.css("display",displayValue)}else{this.field.show()}},getField:function(){return this.field},enable:function(){this.status("disable",false)},disable:function(){this.status("disable",true)},isDisabled:function(){return this.hasStatus("disable")},status:function(statusName,bool,fireEvents){var self=this,o=self.options;if($.inArray(statusName,statusNames)<0){return}var cleanBool=!!bool,states=self.states;if(cleanBool===states[statusName]){return}states[statusName]=cleanBool;self.redraw();if(states[statusName]){self.field.addClass(statusName)}else{self.field.removeClass(statusName)}var layers=self.layers;if(statusName==="disable"){if(!layers.disable){layers.disable=$('<div class="disable-overlay"></div>').appendTo(layers.items)}if(cleanBool){layers.disable.css({width:layers.items.outerWidth()-2+"px",height:layers.items.outerHeight()-2+"px"}).show()}else{layers.disable.hide()}}if(fireEvents!==false){self._trigger("statusUpdate",null,{statusName:statusName,value:states[statusName]})}},updateStatus:function(statusName,bool,fireEvents){this.status(statusName,bool,fireEvents)},hasStatus:function(statusName){return!!this.states[statusName]},_destroy:function(){var self=this;if(self.type&&self.type.tearDown){self.type.tearDown.call(self.type,self)}}});$.formBuilder.inputField.types={}})(jQuery);(function($){"use strict";$.widget("formBuilder.inputFilter",{options:{toUpper:false,max:0,pattern:/[\w\s]/,extraFilter:function(currentValue,inText){return inText}},_create:function(){var self=this,e=self.element,memory;self.nativeChange=false;if(!e.is("input[type=text], textarea")){throw new Error("inputFilter must be applied to a text input ")}e.on("keydown.inputFilter",$.proxy(this._onKeyDown,self));e.on("keypress.inputFilter",$.proxy(this._onKeyPress,self));e.on("paste.inputFilter",$.proxy(this._onPaste,self));e.on("focus.inputFilter",function(){memory=e.val()});e.on("blur.inputFilter",function(){if(!self.nativeChange&&memory!==e.val()){e.change()}self.nativeChange=false})},setMax:function(max){this.options.max=max},setPattern:function(regex){this.options.pattern=regex},_onPaste:function(ev){setTimeout($.proxy(this._clean,this),0)},_onKeyDown:function(ev){if(ev.which<32||ev.which>126||ev.ctrlKey){this.nativeChange=true}},_onKeyPress:function(ev){var self=this;if(ev.which<32||ev.which>126||ev.ctrlKey){return true}self._type(String.fromCharCode(ev.which));return false},_clean:function(){var v=this.element.val();this.element.val("");$.each(v.split(""),$.proxy(function(i,c){this._type(c)},this))},_type:function(text){var self=this,o=self.options,e=self.element,val=e.val(),keytypedEvent="keytyped",keyignoredEvent="keyignored",p,tmp;if(o.toUpper){text=text.toUpperCase()}if(text.match(o.pattern)&&typeof(text=o.extraFilter(val,text))==="string"){if(e[0]===document.activeElement){p=e.caret();tmp=val.slice(0,p.begin)+text+val.slice(p.end);if(o.max&&tmp.length>o.max){self._trigger(keyignoredEvent);return false}else{e.val(tmp);e.caret(p.begin+text.length)}}else{p=val+text;if(o.max&&p.length>o.max){p=p.substring(0,o.max);self._trigger(keyignoredEvent);return false}e.val(p)}self._trigger(keytypedEvent);return true}else{self._trigger(keyignoredEvent);return false}},_destroy:function(){var self=this,e=self.element;e.off(".inputFilter")}})})(jQuery);(function($){"use strict";var doc=$(document),win=$(window),body=$("body");$.widget("formBuilder.popOver",{options:{target:"",top:0,left:0,appendTo:"body"},_create:function(){var self=this,o=self.options,e=self.element;self.showing=false;e.detach();var content=e.clone().addClass("form-input-tooltip");self.title=$('<h3 class="tooltip-title"></h3>');e.addClass("tooltip-wrapper").css("position","absolute");e.empty();e.append(self.title).append(content);e.appendTo(o.appendTo);self.onClick=function(ev){var target=$(ev.target);if(!self.showing){return}if(!target.childOf(e,true)&&!$(ev.delegateTarget.activeElement).childOf(e,true)&&!target.childOf(o.target,true)){if(self._trigger("beforeoffclick",ev,target)){self.hide()}}};self.onResize=function(ev){if(!self.showing){return}self.position()};doc.on("mousedown",self.onClick);win.on("resize",self.onResize)},setAppendTo:function(el){var self=this,o=self.options,e=self.element;o.appendTo=el;e.appendTo(el)},_init:function(){var self=this,e=self.element,titleElement=self.title;var title=e.attr("title");if(title){titleElement.text(title).show()}else{titleElement.hide()}},toggle:function(){var self=this,e=self.element;if(self.showing){self.hide()}else{self.show()}},show:function(){var self=this;if(self.showing){return}setTimeout(function(){self.showing=true;self.position();self.element.fadeIn(10);self._trigger("onShow")},0)},hide:function(){var self=this;if(!self.showing){return}self.showing=false;self.element.hide();self._trigger("onHide")},position:function(){var self=this,o=self.options,e=self.element,my="left+"+(o.left-3)+" top+"+(o.top+3),at="left bottom",collision="flipfit none";if(o.my){my=o.my}if(o.at){at=o.at}if(o.collision){collision=o.collision}setTimeout(function(){e.position({my:my,at:at,of:o.target,collision:collision})},0)},_destroy:function(){var self=this,e=self.element;doc.off("mousedown",self.onClick);win.off("resize",self.onResize)}})})(jQuery);(function($){"use strict";var util=$.formBuilder.util;var statusNames=["require","disable","error","hover","warn"];$.widget("formBuilder.selectionField",{options:{require:undefined,required:undefined,label:"",radioGroup:undefined},_create:function(){var self=this,o=self.options,e=self.element;self.dirty=false;util.loadDomData(e,o,["label"]);util.loadDomToggleData(e,o,["require","required"]);o.required=o.require||o.required;var field=self.field=$('<div class="selection-field"></div>');var layers=self.layers={};e.before(field).appendTo(field);if(!o.label){o.label=e.data("label")}if(o.label){self.setLabel(o.label)}field.attr("class",$.trim(field.attr("class")+" "+e.attr("class")));e.removeAttr("class");self.isRadio=e.is('[type="radio"]');var parentContainer=field.closest(".selection-field-group, :formBuilder-formBuilder");if(!parentContainer.length||parentContainer.is(":formBuilder-formBuilder")){field.wrap('<div class="selection-field-group"/>');if(self.isRadio){self.radioGroup=e}}self.states={};if(self.isRadio){if(o.radioGroup){self.radioGroup=o.radioGroup}else{self.radioGroup=e}self._updatePreviousValue();var widgets=self.radioGroup.not(e).filter(":formBuilder-selectionField");if(!o.required){widgets.each(function(){var ops=$(this).data("formBuilderSelectionField").options;if(ops.required){o.required=ops.required;return false}})}if(o.required){widgets.each(function(){var sfw=$(this).data("formBuilderSelectionField");sfw.options.required=o.required})}}else{self.prevValue=e.is(":checked")}self.status("require",o.required,false);e.change(function(ev){self.validate()});field.mouseenter(function(){self.status("hover",true)}).mouseleave(function(){self.status("hover",false)})},setLabel:function(newLabel){var self=this,e=self.element;if(!self.label){e.wrap("<label></label>");self.label=$("<span></span>");e.after(self.label)}self.label.html(newLabel)},_updatePreviousValue:function(value){var self=this;if(!self.isRadio){self.prevValue=!!value;return}var prevValue=value||self.radioGroup.filter(":checked").val();self.radioGroup.filter(":formBuilder-selectionField").each(function(){$(this).data("formBuilderSelectionField").prevValue=prevValue})},checkDirty:function(){var self=this,e=self.element;if(!self.dirty){var val=self.get();if(!util.equals(self.prevValue,val)&&!(typeof self.prevValue==="undefined"&&!val)){if(self.isRadio){self.radioGroup.each(function(){var sfw=$(this).data("formBuilderSelectionField");sfw.dirty=true;sfw.field.addClass("dirty")})}else{self.dirty=true;self.field.addClass("dirty")}self._trigger("dirty")}}else{if(self.cleanCheckTimer){clearTimeout(self.cleanCheckTimer)}self.cleanCheckTimer=setTimeout(function(){var prev=self.prevValue,val=self.get();if(util.equals(prev,val)){self.clearDirty()}},300)}},isDirty:function(){return this.dirty},clear:function(){var self=this;self.set()},clearDirty:function(){var self=this;if(self.cleanCheckTimer){clearTimeout(self.cleanCheckTimer)}if(self.isRadio){self.radioGroup.each(function(){var sfw=$(this).data("formBuilderSelectionField");sfw.dirty=false;sfw.field.removeClass("dirty")})}else{self.dirty=false;self.field.removeClass("dirty")}self._trigger("clean")},conflicts:function(value){var self=this;if(self.dirty&&self.get()!==value){return{key:self.element.attr("name"),vOld:self.get(),vNew:value}}return null},set:function(value){var self=this,e=self.element;if(self.isRadio){self.radioGroup.removeAttr("checked");if(typeof value!=="undefined"){self.radioGroup.filter('[value="'+value+'"]').prop("checked",true)}self._updatePreviousValue()}else{value=!!value;self.prevValue=value;e.prop("checked",self.prevValue)}self.clearDirty();self._trigger("afterset",null,[value])},get:function(){var self=this,e=self.element;if(self.isRadio){return self.radioGroup.filter(":checked").val()}return e.is(":checked")},validate:function(){var self=this,o=self.options,e=self.element,isValid=true;if(o.required){if(self.isRadio){isValid=self.radioGroup.filter(":checked").length===1}else{isValid=!!e.prop("checked")}}self.status("error",!isValid);return isValid},hide:function(){this.field.hide()},show:function(){this.field.show()},getField:function(){return this.field},enable:function(){this.status("disable",false)},disable:function(){this.status("disable",true)},isDisabled:function(){return this.hasStatus("disable")},status:function(statusName,bool,fireEvents){var self=this,o=self.options;if($.inArray(statusName,statusNames)<0){return}var cleanBool=!!bool,states=self.states;if(cleanBool===states[statusName]){return}states[statusName]=cleanBool;if(states[statusName]){self.field.addClass(statusName)}else{self.field.removeClass(statusName)}if(statusName==="disable"){self.field.css("pointer-events",cleanBool?"none":"auto")}if(self.isRadio&&(statusName==="disable"||statusName==="error"||statusName==="warn"||statusName==="require")){self.radioGroup.not(self.element).filter(":formBuilder-selectionField").filter(function(){return $(this).selectionField("hasStatus",statusName)!==cleanBool}).selectionField("status",statusName,bool,false)}if(fireEvents!==false){self._trigger("statusUpdate",null,{statusName:statusName,value:states[statusName]})}},hasStatus:function(statusName){return!!this.states[statusName]},_destroy:function(){var self=this;if(self.radioGroup){self.radioGroup.not(self.element).each(function(){var radio=$(this);radio.data("formBuilderSelectionField").radioGroup=undefined;radio.selectionField("destroy")})}}})})(jQuery);(function($){"use strict";$.widget("formBuilder.submitButton",{options:{color:"#000",delay:10,disabled:false,waiting:false,preventDefault:true,enterKeyListenerProvider:function(){return this.parents("form").first()},onKeyDown:function(ev){if(ev.keyCode===13&&!$(ev.target).is("textarea")){this.submit.call(this,ev)}}},_showLoading:function(){var self=this,e=self.element,o=self.options,w=e.width(),h=e.height();e.addClass("submitting");self.getButtonLabel().css("visibility","hidden");self.spinner.appendTo(e).spin({color:o.color,top:-h+4,left:-7})},getButtonLabel:function(){return this.element.find(".ui-button-text")},_hideLoading:function(){var self=this,e=self.element;if(self.destroyed){return}e.removeClass("submitting");self.spinner.spin("stop");self.getButtonLabel().css("visibility","visible")},_create:function(){var self=this;var o=self.options;var e=self.element,bOptions={};if(o.icons){bOptions.icons=o.icons}if(o.disabled){bOptions.disabled=o.disabled}if(o.text!==undefined){bOptions.text=o.text}o.label=e.html();e.button(bOptions).on("click.submitButton",$.proxy(self.submit,self));self.spinner=$('<div class="spinner" style="display: inline-block; position: absolute; margin-left: -.10cm; margin-top: -.4cm;"></div>');self.spinner.appendTo(e);var listenerProvider=o.enterKeyListenerProvider;if($.isFunction(listenerProvider)){var listener=listenerProvider.call(e);if(typeof listener!=="undefined"){listener.on("keydown.submitButton",$.proxy(o.onKeyDown,self))}}},submit:function(ev){var self=this;var o=self.options;if(o.preventDefault&&ev){ev.preventDefault()}if(o.waiting===true||o.disabled===true){return this}if(!ev){ev=null}if(self._trigger("beforesubmit",ev)===false){return this}o.waiting=true;self._showLoading.call(self);setTimeout(function(){self._trigger("submit",ev,function(){o.waiting=false;self._hideLoading.call(self);self._trigger("aftersubmit",ev)})},o.delay);return this},enable:function(){this.options.disabled=false},disable:function(){this.options.disabled=true},_destroy:function(){var self=this,e=self.element;e.off(".submitButton");self.destroyed=true}})})(jQuery);(function($){"use strict";var dict=$.formBuilder.lang.dict;$.widget("formBuilder.textSubmitter",{_textSubmitterTemplate:'<div class="text-submitter">'+'<textarea name="text-entry" rows="3" />'+'<div class="send-instruction noselect"></div>'+"</div>",options:{width:"300px",placeholder:"",sendInstruction:dict.defaultSendInstruction,rows:undefined,ignoreEmptySubmit:false},_create:function(){var self=this,e=self.element,o=self.options,tmp;self.container=$(self._textSubmitterTemplate);e.append(self.container);self.textEntry=e.find('textarea[name="text-entry"]');if(!isNaN(o.rows)){self.textEntry.attr("rows",o.rows)}self.sendInstruction=e.find(".send-instruction").text(o.sendInstruction);self.sendInstruction.css("visibility","hidden");self.textEntry.width(o.width).inputField({placeholder:o.placeholder,statusUpdate:function(ev,data){if(data.statusName==="disable"){if(data.value===false&&self.textEntry.is(":focus")){self.sendInstruction.css("visibility","visible");self.textEntry.removeAttr("readonly")}else{self.sendInstruction.css("visibility","hidden");self.textEntry.attr("readonly",true)}}}});self.element.width(o.width);self.textEntry.on("focus",function(){self.sendInstruction.css("visibility","visible")}).on("blur",function(){self.sendInstruction.css("visibility","hidden")}).on("keydown",function(ev){if(ev.which===13&&!ev.shiftKey){ev.preventDefault();self._submit()}})},_submit:function(){var self=this,o=self.options;if(self.textEntry.inputField("isDisabled")||o.ignoreEmptySubmit&&self.textEntry.inputField("isEmpty")){return}self.disable();var onComplete=function(success){if(success){self.clear()}self.enable()};self._trigger("submit",null,{text:self.get(),onComplete:onComplete})},set:function(text){var self=this;self.textEntry.inputField("set",text)},setInstruction:function(text){var self=this;self.sendInstruction.text(text)},get:function(){var self=this;return self.textEntry.inputField("get")},clear:function(){var self=this;self.textEntry.inputField("clear")},disable:function(){var self=this;self.textEntry.inputField("disable")},enable:function(){var self=this;self.textEntry.inputField("enable")},_destroy:function(){var self=this;self.container.remove()}})})(jQuery);(function($){"use strict";var types=$.formBuilder.inputField.types;var dict=$.formBuilder.lang.dict;types.dateTime={momentStoreFormat:"YYYY-MM-DDTHH:mm:ss[Z]",setUp:function(inputFieldWidget){var self=this,e=inputFieldWidget.element;self.storeUtc=e.data("storeUtc");if(self.storeUtc===undefined){self.storeUtc=true}else{self.storeUtc=!!self.storeUtc}self.ifw=inputFieldWidget;self._setUpFields();self._refreshFieldWidth();self._setUpCleanDirtyEvents();self.ifw.element.on("resize",function(ev){self._refreshFieldWidth()})},_setUpFields:function(){var self=this,e=self.ifw.element,fieldItems=self.ifw.element.parent().parent(),options,tmp,i;self.ifw.element.parent().hide();self.dateWidget=$('<input type="text" data-type="date"/>');self.timeWidget=$('<input type="text" data-type="time"/>');for(i=0;i<types.date.attributes.length;++i){tmp=e.data(types.date.attributes[i]);if(tmp!==undefined){self.dateWidget.data(types.date.attributes[i],tmp)}}for(i=0;i<types.time.attributes.length;++i){tmp=e.data(types.time.attributes[i]);if(tmp!==undefined){self.timeWidget.data(types.time.attributes[i],tmp)}}options={require:true};self.dateWidget.prependTo(fieldItems).inputField(options);self.timeWidget.appendTo(fieldItems).inputField(options);self.dateWidget.parent().addClass("first");self.timeWidgetInstance=self.timeWidget.data("formBuilderInputField");self.dateWidgetInstance=self.dateWidget.data("formBuilderInputField")},_refreshFieldWidth:function(){var self=this,fullWidth=self.ifw.element.width(),elDate=self.dateWidget,elTime=self.timeWidget,timeWidthRatio,minWidth;fullWidth-=elDate.outerWidth(true)-elDate.width();fullWidth-=elTime.outerWidth(true)-elTime.width();minWidth=self.ifw.element.css("min-width");if(minWidth!==null){minWidth=parseInt(minWidth,10)}if(isNaN(minWidth)||minWidth<100){minWidth=270}if(fullWidth<minWidth){fullWidth=minWidth}timeWidthRatio=self.ifw.element.data("timeWidthRatio");if(isNaN(timeWidthRatio)||timeWidthRatio<.2||.8<timeWidthRatio){timeWidthRatio=.5}elTime.width(fullWidth*timeWidthRatio);elDate.width(fullWidth-elTime.width())},_setUpCleanDirtyEvents:function(){var self=this;self.dateWidget.on("dirty clean",function(ev){ev.stopPropagation();self.ifw.checkDirty()});self.timeWidget.on("dirty clean",function(ev){ev.stopPropagation();self.ifw.checkDirty()})},converter:{toField:function(val,ifw){var self=this,splitDate=self._splitDateAndTime(val);self.timeWidgetInstance.set(splitDate.time);self.dateWidgetInstance.set(splitDate.date)},fromField:function(val,ifw){var self=this,localDate=self.dateWidgetInstance.get(),time=self.timeWidgetInstance.get(),dateTime;if(!localDate.trim()||!time.trim()){return""}if(!localDate.trim()){localDate=moment()}else{localDate=moment(localDate,types.date.momentStoreFormat)}if(!time.trim()){time.moment();if(self.storeUtc){time.utc()}}else{if(self.storeUtc){time=moment.utc(time,types.time.momentStoreFormat).local()}else{time=moment(time,types.time.momentStoreFormat)}}dateTime=self._joinDateAndTimeMoments(localDate,time);if(self.storeUtc){dateTime.utc()}if(!dateTime.isValid()){return""}return dateTime.format(self.momentStoreFormat)}},_splitDateAndTime:function(dateTimeString){var self=this,dateTime,result={};if(self.storeUtc){dateTime=moment.utc(dateTimeString,self.momentStoreFormat)}else{dateTime=moment(dateTimeString,self.momentStoreFormat)}if(!dateTime.isValid()){return{date:"",time:""}}result.time=dateTime.format(types.time.momentStoreFormat);if(self.storeUtc){dateTime.local()}result.date=dateTime.format(types.date.momentStoreFormat);return result},_joinDateAndTimeMoments:function(localDateMoment,localTimeMoment){return moment().utcOffset(localTimeMoment.utcOffset()).milliseconds(0).second(localTimeMoment.second()).minute(localTimeMoment.minute()).hour(localTimeMoment.hour()).date(localDateMoment.date()).month(localDateMoment.month()).year(localDateMoment.year())},validate:function(ifw){var self=this,valid=true,skipRequired=!self.ifw.hasStatus("require");if(skipRequired){skipRequired=!self.dateWidgetInstance.isEmpty();skipRequired=skipRequired&&!self.timeWidgetInstance.isEmpty()}valid=valid&&self.dateWidgetInstance.validate(skipRequired);valid=valid&&self.timeWidgetInstance.validate(skipRequired);if(!valid){return{message:dict.invalid}}},isEmpty:function(){var self=this;return $.trim(self.dateWidget.val())+$.trim(self.timeWidget.val())===""},tearDown:function(ifw){var self=this;self.dateWidget.inputField("getField").remove();self.timeWidget.inputField("getField").remove();self.dateWidget=undefined;self.timeWidget=undefined;ifw.element.parent().show()}}})(jQuery);(function($){"use strict";var types=$.formBuilder.inputField.types;var dict=$.formBuilder.lang.dict;types.tmsPhone=$.extend({},types.phone,{_phoneTypeTemplate:'<div class="phone-type-form" style="padding: 1px;">'+'<div class="phone-type clickable" data-code="mobile" ><span class="fb-icon fb-icon-iphone"> '+dict.mobile+"</span></div>"+'<div class="phone-type clickable" data-code="home"><span class="fb-icon fb-icon-home"> '+dict.home+"</span></div>"+'<div class="phone-type clickable" data-code="work"><span class="fb-icon fb-icon-office"> '+dict.work+"</span></div>"+'<div class="phone-type clickable" data-code="fax"><span class="fb-icon fb-icon-print"> '+dict.fax+"</span></div>"+"</div>",setUp:function(inputWidget){var self=this,o=inputWidget.options,e=inputWidget.element;self.element=e;types.phone.setUp.call(self,inputWidget);self.desc=$("<span></span>");self.setType();self.menu=$(self._phoneTypeTemplate);

self.icon=inputWidget.addOn(1,"").addClass("clickable").append(self.desc).css({textAlign:"left",width:"4.8em"});self.icon.on("click",function(){self._setupMenu(inputWidget);self.toggleMenu()})},toggleMenu:function(){var self=this;self.menu.find(".focused").removeClass("focused").end().find('[data-code="'+self.type+'"]').addClass("focused").end().popOver("toggle")},_setupMenu:function(inputWidget){var self=this,e=self.element,appendToParent,appendTo;if(self.menuBuilt){return}self.menu.popOver({target:self.icon,appendTo:inputWidget.getField()}).on("click",function(ev){ev.stopPropagation()}).on("click",".phone-type",function(ev){ev.stopPropagation();var control=$(this);self.setType(control.attr("data-code"));self.menu.popOver("hide")});self.menuBuilt=true},setType:function(type){var self=this;if(!type){type="home"}var icon="";if(type==="work"){icon="office"}else if(type==="mobile"){icon="iphone"}else if(type==="fax"){icon="print"}else{icon=type="home"}self.desc.html('<span class="fb-icon fb-icon-'+icon+'"> '+dict[type]+"</span>");self.type=type},converter:{fromField:function(number,inputWidget){var self=this;number=types.phone.converter.fromField.call(self,number,inputWidget);if(number!==0&&!number){return null}var data={type:self.type,number:number};if(self.id){data.id=self.id}return data},toField:function(data,inputWidget){var self=this;if(data){self.setType(data.type);self.id=data.id;data=types.phone.converter.toField.call(self,data.number,inputWidget)}return data}},destroy:function(inputWidget){inputWidget.element.off(".tmsPhone");$.Widget.prototype.destroy.call(this)}})})(jQuery);(function($){"use strict";var types=$.formBuilder.inputField.types;var dict=$.formBuilder.lang.dict;$.formBuilder.inputField.arraySelectCreator=function(array){return $.extend({},types.select,{map:function(s){var d={};d.label=s;d.value=s;return d},load:function(){var self=this;return $.when($.map(array,$.proxy(self.map,self)))}})};$.formBuilder.inputField.booleanSelectCreator=function(trueString,falseString){return $.extend({},types.select,{map:function(s){var d={},val=falseString;if(s===true){val=trueString}d.label=val;d.value=!!s;return d},deMap:function(d){if($.isEmptyObject(d)){return false}return d.value},load:function(){var self=this;return $.when($.map([true,false],$.proxy(self.map,self)))}})};var date=new Date;var years=[];for(var i=0;i<=10;i++){years.push((date.getFullYear()+i).toString())}types.tmsExpYear=$.formBuilder.inputField.arraySelectCreator(years);types.tmsYesNo=$.formBuilder.inputField.booleanSelectCreator(dict.yes,dict.no)})(jQuery);(function($){"use strict";var types=$.formBuilder.inputField.types;var util=$.formBuilder.util;var lang=$.formBuilder.lang;types.text={};types.date={attributes:["minyear","maxyear","startdate","enddate","enforceMax","enforceMin"],momentStoreFormat:"YYYY-MM-DD",_dateFormat:"MM/DD/YYYY",setUp:function(ifw){var self=this,e=ifw.element,tmp,startDate,endDate;ifw.placeholder(self._dateFormat);self.enforceMin=!!e.data("enforceMin");self.enforceMax=!!e.data("enforceMax");if(self.storeUtc===undefined){self.storeUtc=true}else{self.storeUtc=!!self.storeUtc}var minYear=(new Date).getFullYear()-15,maxYear=(new Date).getFullYear()+2;tmp=e.data("minyear");if(tmp!==undefined){if(tmp==="CURRENT"){minYear=(new Date).getFullYear()}else{minYear=tmp}}tmp=e.data("maxyear");if(tmp!==undefined){if(tmp==="CURRENT"){maxYear=(new Date).getFullYear()}else{maxYear=tmp}}self.startDate="01/1/"+minYear;self.endDate="12/31/"+maxYear;tmp=e.data("startdate");if(tmp!==undefined){if(tmp==="TODAY"){self.startDate=moment().format(self._dateFormat)}else if(tmp.match(/^[0-9]{2}\/[0-9]{2}\/[0-9]{4}$/)){self.startDate=tmp}}tmp=e.data("enddate");if(tmp!==undefined){if(tmp==="TODAY"){self.endDate=moment().format(self._dateFormat)}else if(tmp.match(/^[0-9]{2}\/[0-9]{2}\/[0-9]{4}$/)){self.endDate=tmp}}var datePickerOptions={startDate:self.startDate,endDate:self.endDate,autoclose:true,forceParse:false,format:"mm/dd/yyyy",todayBtn:true,todayHighlight:true,language:lang.code};e.datepicker(datePickerOptions);e.inputFilter({pattern:/[0-9\/]/,max:10,toUpper:true})},converter:{toField:function(val,ifw){if(!val||!val.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/)){return""}return val.substring(5,7)+"/"+val.substring(8,10)+"/"+val.substring(0,4)},fromField:function(val,ifw){if(!val||!val.match(/^[0-9]{2}\/[0-9]{2}\/[0-9]{4}$/)){return""}return val.substring(6,10)+"-"+val.substring(0,2)+"-"+val.substring(3,5)}},tearDown:function(ifw){ifw.element.datepicker("remove")},validate:function(ifw){var self=this,date=moment(ifw.element.val(),self._dateFormat,true);if(!date.isValid()||self.enforceMin&&date.isBefore(moment(self.startDate,self._dateFormat))||self.enforceMax&&moment(self.endDate,self._dateFormat).isBefore(date)){return{message:lang.dict.invalid}}}}})(jQuery);(function($){"use strict";var types=$.formBuilder.inputField.types;types.display={setUp:function(ifw){var e=ifw.element;e.parents(".field-item").hide();e.parents(".field-items").append('<div class="input-display"></div>')},converter:{toField:function(val,ifw){ifw.element.parents(".field-items").find(".input-display").html(val)},fromField:function(value,ifw){return ifw.element.parents(".field-items").find(".input-display").html().trim()}}}})(jQuery);(function($){"use strict";var types=$.formBuilder.inputField.types;var dict=$.formBuilder.lang.dict;var util=$.formBuilder.util;types.money={attributes:["currency-symbol","hide-symbol","max-amount","min-amount","allowNegative"],setUp:function(ifw){var self=this,e=ifw.element;self.element=e;var o=self.typeOptions={currencySymbol:"$"};util.loadDomData(e,o,["currencySymbol","maxAmount","minAmount"]);util.loadDomToggleData(e,o,["hideSymbol","allowNegative"]);if(!o.allowNegative){e.inputFilter({pattern:/[0-9\.]/}).change(function(){self._onChange()}).blur(function(){e.val(self.format(e.val()))})}else{e.inputFilter({pattern:/[0-9\.-]/}).change(function(){self._onChange()}).blur(function(){e.val(self.format(e.val()))})}if(!o.hideSymbol){ifw.addOn(-100,o.currencySymbol)}},_onChange:function(){var self=this,e=self.element,caret=e.caret();e.val(self.format(e.val())).caret(caret.begin,caret.end)},format:function(money){var self=this;if($.trim(money)===""){return""}try{if(isNaN(money)){money=money.toString();var count=0;for(var i=0;i<money.length;i++){if(money[i]==="."){count++}}var dec=money.indexOf(".");if(dec!==-1){money=money.replace(/\./g,"");money=money.substring(0,dec)+"."+money.substring(dec)}money=parseFloat(money)}return(+money).toFixed(2)}catch(err){return""}},converter:{toField:function(val,ifw){return this.format(val)},fromField:function(val,ifw){if($.trim(val)===""){return""}return+this.format(val)}},validate:function(ifw){var self=this,o=self.typeOptions;if(o.maxAmount||o.minAmount){var e=ifw.element,enteredAmount=+ifw.get();if(o.maxAmount&&enteredAmount>o.maxAmount){return{message:dict.over}}if(o.minAmount&&enteredAmount<o.minAmount){return{message:dict.under}}}}}})(jQuery);(function($){"use strict";var types=$.formBuilder.inputField.types;var dict=$.formBuilder.lang.dict;types.phone={setUp:function(ifw){var self=this,e=ifw.element;e.inputFilter({pattern:/[0-9()\s\-x]/});e.on("blur",function(){e.val(self.format(e.val()))})},converter:{toField:function(val,ifw){return this.format(val)},fromField:function(val,ifw){return this.format(val)}},format:function(text){if(!text){return""}var extensionStart=0,xlocation=text.indexOf("x"),lastSpace=text.lastIndexOf(" "),ext="",extraExt="";if(xlocation>0){extensionStart=xlocation}else if(lastSpace>7){extensionStart=lastSpace}if(extensionStart>0){ext=text.substring(extensionStart+1);text=text.substring(0,extensionStart)}var num=$.trim(text.replace(/[()\s\-]/g,"")),numberLength=num.length;if(num[0]==="1"){num=num.substring(1);numberLength--}if(numberLength>10){extraExt=num.substring(10);num=num.substring(0,10);numberLength=10}if(numberLength===7){num=num.substring(0,3)+"-"+num.substring(3)}else if(numberLength===10){num=num.substring(0,3)+"-"+num.substring(3,6)+"-"+num.substring(6)}ext=extraExt+ext;num=num.replace(/[^0-9^x^-]/g,"");ext=ext.replace(/[^0-9^x^-]/g,"");if(ext){num+="x"+ext}return num},validate:function(ifw){if(!ifw.element.val().match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)){return{message:dict.invalid}}}}})(jQuery);(function($){"use strict";var types=$.formBuilder.inputField.types;var dict=$.formBuilder.lang.dict;var cannedFormatters={trim:function(val){return $.trim(val)}};var createRegexType=function(pattern,filter,flags,max){if(flags===undefined){flags={}}if(flags.toUpper!==false){flags.toUpper=true}var type={validate:function(ifw){if(!ifw.element.val().match(pattern)){return{message:dict.invalid}}}};if(filter||max){type.setUp=function(ifw){var filterData={pattern:filter||/./,toUpper:flags.toUpper,max:max||0};if(ifw.element.attr("data-max")){filterData.max=ifw.element.attr("data-max")}ifw.element.inputFilter(filterData)}}if(flags.cannedFormatter!==undefined){if($.isFunction(cannedFormatters[flags.cannedFormatter])){type.format=cannedFormatters[flags.cannedFormatter];type.converter={toField:function(val,ifw){return type.format(val)},fromField:function(val,ifw){return type.format(val)}}}}return type};$.formBuilder.inputField.createRegexType=createRegexType;$.extend(types,{utext:createRegexType(/.*/,/.*/,{toUpper:true}),integer:createRegexType(/^-?[0-9]*$/,/[-0-9]/),number:createRegexType(/^-?[0-9]+\.?[0-9]*$/,/[-0-9.]/),state:createRegexType(/^[A-Z]{2}$/,/[A-Z]/,{},2),feid:createRegexType(/^[0-9]{2}\-?[0-9]{7}$/,/[0-9\-]/,{},10),zip:createRegexType(/(^\d{5}(\-?\d{4})?$)|(^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} ?\d{1}[A-Za]{1}\d{1})$/,/[0-9A-Z\s\-]/,{},10),email:createRegexType(/^(?!.*\.{2})[A-Za-z0-9._%+\-]+@[A-Za-z0-9.\-]+\.[A-Za-z]{2,4}$/,/[A-Za-z0-9._%+\-@]/,{toUpper:false,cannedFormatter:"trim"})})})(jQuery);(function($){"use strict";var doc=$(document);var util=$.formBuilder.util;$.formBuilder.inputField.types.select={setUp:function(inputFieldWidget){var self=this,o=inputFieldWidget.options,e=inputFieldWidget.element;self.element=e;self.source=[];self.inputWidget=inputFieldWidget;var fieldGroup=self.fieldGroup=inputFieldWidget.field.parents(".input-field-group");if(e.is("select")){console.log("** ERROR: deprecated use of <select> in the select type **")}e.css("opacity",0);var shim=self.shim=$('<div class="shim"></div>').insertAfter(e);inputFieldWidget.field.addClass("select-box");self.iconClosed=$('<span class="fb-icon fb-icon-sort-down dropdown-closed-icon"></span>').insertAfter(e);self.iconOpen=$('<span class="fb-icon fb-icon-sort-up dropdown-open-icon"></span>').insertAfter(e).hide();var panel=self.panel=$('<div class="fb-select-panel"><div class="tms-select-dropdown-content"><div class="search" style="position:relative;"/><div class="options" style="position:relative;"/></div></div>').hide();self.options=panel.find(".options");inputFieldWidget.layers.items.append(panel).css("position","relative");var selectionClass=self.sectionClass="selected";panel.on("click",".option",function(){self._setSelected()}).on("mouseenter",".option",function(){panel.find("."+selectionClass).removeClass(selectionClass);$(this).addClass(selectionClass)}).on("mouseleave",".option",function(){$(this).removeClass(selectionClass)});inputFieldWidget.layers.items.on("click",function(ev){if(inputFieldWidget.states.disable){return}var target=$(ev.target);if(target.childOf(panel,true)){return}setTimeout(function(){self.toggle()},0)});var filter=self.filter=$('<input type="text" class="filter-box"/>').appendTo(panel.find(".search")).inputField();filter.after('<span class="fb-icon fb-icon-search"></span>');filter.parents(".field-item").first().addClass("first");filter.parent().css({display:"block",paddingRight:"2em"}).parent().css("display","block").parent().css("display","block");filter.on("click",function(ev){ev.preventDefault();ev.stopPropagation()});e.on("keydown",$.proxy(self._keyDownNavigate,self));filter.on("keydown",$.proxy(self._keyDownNavigate,self));filter.on("keyup",$.proxy(self._onKeyup,self));filter.on("dirty clean",function(ev){ev.preventDefault();ev.stopPropagation()});self.closeListener=function(ev){var which=ev.which;if(which===27||which===13){ev.preventDefault();ev.stopPropagation();if(which===13){self._setSelected()}else{self.element.focus()}setTimeout(function(){self.close()},0);return}var target=$(ev.target);if(!target.childOf(panel,true)&&!target.childOf(fieldGroup,true)){setTimeout(function(){self.close()},0)}};self.update()},_keyDownNavigate:function(ev){var self=this,panel=self.panel,selectionClass=self.sectionClass,which=ev.which;if(which===9){self.element.next("input").focus();return}if(which===27||which===13){ev.preventDefault();return}var selected,next;if(which===40){selected=panel.find("."+selectionClass);if(!selected.length){panel.find(".option:first").addClass(selectionClass)}else{next=selected.next();if(next.length){next.addClass(selectionClass);selected.removeClass(selectionClass)}}self._scroll()}if(which===38){selected=panel.find("."+selectionClass);if(!selected.length){panel.find(".option:last").addClass(selectionClass)}else{next=selected.prev();if(next.length){next.addClass(selectionClass);selected.removeClass(selectionClass)}}self._scroll()}if(which<32||which>126){return}self.open()},_onKeyup:function(ev){var self=this,filter=self.filter,which=ev.which,val=filter.val();if(self.filterValue===val){return}self.filterValue=val;self._filterOptions()},_setSelected:function(){var self=this,e=self.element,selected=self.panel.find(".selected:not(.filtered):visible");if(!selected.length){self._selectFirstNonEmptyOption()}selected=self.panel.find(".selected:not(.filtered):visible");var item=self.item=selected.data("item");if(!item){return}self._setLabel(self.renderLabel(item));self.close();e.val(self.item.value);e.focus();e.change();self.inputWidget.redraw();self.showHideCommand()},_selectFirstNonEmptyOption:function(){var self=this;self._removeSelection();self.panel.find(".option:not(.filtered):visible").each(function(){var option=$(this);if(option.html()){option.addClass("selected");return false}})},_set:function(val){var self=this;self.filter.val("");self.filterValue="";self.item=undefined;self.loaded.done(function(){self._removeSelection();var options=self.panel.find(".option");options.each(function(){var item=$(this),itemData=item.data("item");if(self._equal(itemData,val)){item.addClass("selected");self.item=itemData;self._setLabel(itemData.label);self.showHideCommand();return false}});if(!self.item||!self.item.value){if(self.inputWidget._trigger("itemnotfound",null,[val])){self._handleItemNotFound()}}})},_removeSelection:function(){this.panel.find(".option.selected").removeClass("selected")},_handleItemNotFound:function(){var self=this,e=self.element;self._setDefaultItem();if(!self.item||!self.item.value){self._selectFirstItem()}},_setDefaultItem:function(){var self=this,e=self.element,options=self.panel.find(".option"),defaultValue={value:e.attr("data-default")};options.each(function(){var item=$(this),itemData=item.data("item");if(self._equal(itemData,defaultValue)){if(e.attr("name")==="params.category"){console.log("found defaultValue",defaultValue,itemData)}item.addClass("selected");self.item=itemData;self._setLabel(itemData.label);self.showHideCommand();return false}})},_selectFirstItem:function(){var self=this,e=self.element,options=self.panel.find(".option");self.item=options.first().addClass("selected").data("item");if(self.item&&self.item.label){self._setLabel(self.item.label)}else{self._setLabel("")}self.showHideCommand()},showHideCommand:function(){var self=this,showClass=self.item&&self.item.showClass,sections=self.showHideSections;if(!sections){return}sections.hide();if(!showClass){return}sections.filter("."+showClass).show()},clear:function(andSelectNothing){var self=this,e=self.element;self.item={};self.panel.find(".selected").removeClass("selected");e.val("");self.filter.val("");self.filterValue="";self.shim.text("");if(!andSelectNothing){self._handleItemNotFound()}self.inputWidget.redraw()},_equal:function(a,b){return a&&b&&a.value===b.value},_setLabel:function(text){var self=this;self.shim.text(text);if(!self.shimWidthSet){var paddingRight,eWidth;paddingRight=parseFloat(self.iconClosed.outerWidth(true))+parseFloat(self.iconClosed.css("right"))*2;eWidth=parseFloat(self.element.width());self.shim.css("max-width",eWidth-paddingRight);self.shimWidthSet=true}},_getLabel:function(){return this.shim.text()},toggle:function(){var self=this;if(self.panel.is(":visible")){self.close()}else{self.open()}},getOptions:function(){var self=this,optionPanel=self.panel.find(".option"),options=[];optionPanel.each(function(){options.push($(this).data("item"))});return options},_filterOptions:function(){var self=this;self._removeSelection();self.panel.addClass("filtering");if(self.filterTimer){clearTimeout(self.filterTimer)}self.filterTimer=setTimeout(function(){self.__filterOptionsWork()},200)},__filterOptionsWork:function(optionsElements){var self=this,val=self.filterValue;self.panel.addClass("filtering");if(!optionsElements){optionsElements=self.panel.find(".option")}if(!optionsElements.length){self.panel.removeClass("filtering");self.inputWidget._trigger("filterdone");var margin=self.panel.find(".option").not(".filtered").length>0?self.panel.children().css("padding-top"):0;self.filter.inputField("getField").css("margin-bottom",margin);return}var optionsToProcessNow=optionsElements.splice(0,1e3);$.each(optionsToProcessNow,function(i,optionsEl){self._filterItem($(optionsEl),val)});setTimeout(function(){self.__filterOptionsWork(optionsElements)},0)},_filterItem:function(optionEl,val){var self=this,item=optionEl.data("item");if(self._itemShoudBeFiltered(item,val)){optionEl.addClass("filtered")}else{optionEl.removeClass("filtered")}},_itemShoudBeFiltered:function(item,val){if(!val){return false}if(!item.label){return true}return item.label.match(new RegExp($.ui.autocomplete.escapeRegex(val),"i"))===null},_clearFilter:function(){var self=this;self.filter.val("");self.panel.find(".option.filtered").removeClass("filtered")},_buildEmptyOption:function(){var self=this,e=self.element,emptyLabel=e.data("emptyLabel");if(emptyLabel!==""&&!emptyLabel){return}self.source.unshift({label:emptyLabel,value:""})},_buildOptions:function(){var self=this,e=self.element,panel=self.panel,options=self.options;self.element.trigger("tmsselectbeforebuild");options.empty();var optionsbuffer=$("<div/>");if(!self.typeOptions.noSort){self._sort(self.source)}self._buildEmptyOption();$.each(self.source,function(i,item){var option=$('<div class="option"/>'),renderedItem=self.renderItem(item);if(renderedItem!==null){option.append(renderedItem).data("item",item);optionsbuffer.append(option)}if(renderedItem===""){option.height(20)}});options.append(optionsbuffer);self.element.trigger("tmsselectafterbuild",[options])},_sort:function(items){items.sort(function(a,b){if(!a||!b){return}var al=a.label.toLowerCase(),bl=b.label.toLowerCase();return al>bl?1:al<bl?-1:a.label>b.label?1:a.label<b.label?-1:0})},_scroll:function(){var self=this,options=self.options;if(!self.panel.is(":visible")){return}setTimeout(function(){var selected=self.panel.find(".selected");if(selected.length===0){options.scrollTop(0)}else{options.scrollTop(selected.position().top-selected.before().outerHeight())}},0)},open:function(){var self=this,e=self.element,panel=self.panel,inputLayer=self.inputWidget.layers.input,itemsLayer=self.inputWidget.layers.items;if(panel.is(":visible")){return}self.filterValue="";doc.on("click keyup",self.closeListener);var leftOffset=0;if(inputLayer.index()){leftOffset=inputLayer.position().left-1}panel.width(e.width()).css({left:leftOffset,top:itemsLayer.height()-1+"px",width:e.outerWidth()+"px"});self.iconClosed.hide();self.iconOpen.show();panel.show();var margin=self.panel.children().css("padding-top");self.filter.inputField("getField").css("margin-bottom",margin);self.filter.focus();self._scroll()},renderLabel:function(item){return item&&item.label||""},renderItem:function(item){return item.label},close:function(){var self=this,panel=self.panel,filter=self.filter;doc.off("click keyup",self.closeListener);panel.hide();self._clearFilter();self.iconClosed.show();self.iconOpen.hide()},update:function(){var self=this,e=self.element;var o=self.typeOptions={filterMin:5};util.loadDomToggleData(e,o,["noSort"]);util.loadDomData(e,o,["filterMin"]);self.clear(true);self.loaded=$.Deferred();self.load().done(function(source){if(!source){source=[]}self.source=source;setTimeout(function(){self.removeInvalid()},0);self._buildOptions();if(self.filter&&self.filter.data("inputField")){if(source.length<o.filterMin){self.filter.inputField("hide")}else{self.filter.inputField("show")}}var form,sections=$([]);$.each(source,function(i,item){if(item.showClass){if(!form){form=e.parents(":formBuilder-formBuilder").first()}sections=sections.add(form.find("."+item.showClass))}});self.showHideSections=sections;self.loaded.resolve();self.showHideCommand()});return self.loaded},removeInvalid:function(ev,ifw){var self=this,e=self.element,val=e.val(),source=self.source,l=source.length,i;if(ifw&&ifw.item){return}for(i=0;i<l;i++){if(source[i].label===val&&self.item&&self.item.value===source[i].value){self.item=source[i];return}}e.val("")},setOptions:function(options){var self=this;self.optionsMap=options;self.optionsSetDynamically=true;self.update()},load:function(){var self=this,e=self.element,source=[],dataOptions;if(self.optionsSetDynamically){self.optionsSetDynamically=false;return $.when(self.optionsMap)}dataOptions=e.attr("data-options");if(dataOptions){source=$.parseJSON(dataOptions)}else{e.find("option").each(function(){var option=$(this);source.push({label:option.text(),value:option.val()})})}return $.when(source)},map:function(raw){return{label:raw,value:raw}},deMap:function(obj){if(!obj){return null}return obj.value||null},isEmpty:function(){var self=this,data=self.deMap(self.item);return data!==0&&!data},converter:{fromField:function(){var self=this,data=self.item;if(data===undefined){return null}var val=self.deMap(data);if(val===undefined){return null}return val},toField:function(rawdata){var self=this,e=self.element,data=self.map(rawdata);if(!rawdata&&typeof e.data("default")!=="undefined"){data=self.map(e.data("default"))}if(!data){self.clear();return}self._set(data);if(!self.item){self.clear();return}return self.item.label}}}})(jQuery);(function($){"use strict";var types=$.formBuilder.inputField.types;types.text={}})(jQuery);(function($){"use strict";var types=$.formBuilder.inputField.types;var dict=$.formBuilder.lang.dict;var util=$.formBuilder.util;types.time={attributes:["step","military","storeUtc"],momentStoreFormat:"HH:mm",_regex:/^((0[0-9])|([0-9])|(1[0-2])):([0-5][0-9])((am)|(pm))$/,_regex2400:/^(([01]?[0-9])|(2[0-3])):[0-5][0-9]$/,setUp:function(ifw){var self=this,e=ifw.element;var o=self.typeOptions={storeUtc:true};util.loadDomToggleData(e,o,["military","storeUtc"]);util.loadDomData(e,o,["step","storeUtc"]);if(!self.typeOptions.military){ifw.placeholder("H:MMam/pm");e.inputFilter({pattern:/[0-9:apm]/,max:7})}else{ifw.placeholder("HH:MM");e.inputFilter({pattern:/[0-9:]/,max:5})}e.timepicker({appendTo:ifw.getField(),selectOnBlur:false,step:o.step,timeFormat:o.military?"H:i":"g:ia"});e.on("showTimepicker",function(){var newWidth=e.outerWidth();if(newWidth<80){newWidth=80}ifw.getField().children(".ui-timepicker-wrapper").width(newWidth)})},converter:{toField:function(val,ifw){var self=this,time;if(!val||!val.match(/^[0-9]{2}:[0-9]{2}$/)){return""}time=moment.utc(val,self.momentStoreFormat,true);if(!time.isValid()){return""}if(self.typeOptions.storeUtc){time.local()}return time.format(self.typeOptions.military?"H:mm":"h:mma")},fromField:function(val,ifw){var self=this,time;if(!val||!val.match(self.typeOptions.military?self._regex2400:self._regex)){return""}time=moment(val,self.typeOptions.military?"H:mm":"h:mma").milliseconds(0);if(!time.isValid()){return""}if(self.typeOptions.storeUtc){time.utc()}return time.format(self.momentStoreFormat)}},tearDown:function(ifw){ifw.element.timepicker("remove")},validate:function(ifw){var self=this,e=ifw.element,val=e.val(),invalidMessage={message:dict.invalid},valid;valid=self.typeOptions.military?val.match(self._regex2400):val.match(self._regex);if(!valid){return invalidMessage}}}})(jQuery);

!function(e){"use strict";var t="en",i=["en","eng"];"undefined"==typeof e.formBuilder&&(e.formBuilder={});var n=e.formBuilder.lang;if(n||(n=e.formBuilder.lang={}),n.locales||(n.locales={}),n.locales[t]||(n.locales[t]={}),"undefined"==typeof n.code){var r;if(r=navigator.language,r||(r=navigator.userLanguage),r||(r=navigator.browserLanguage),r||(r=navigator.systemLanguage),r){var a=r.indexOf("-");r=r.slice(0,a>0?a:void 0),-1!==i.indexOf(r)&&(n.code=t)}}e.extend(!0,n.locales[t],{remove:"Remove",from:"From",to:"To",custom:"Custom",day:"Day",week:"Week",month:"Month",year:"Year",required:"required",defaultSendInstruction:"press enter to submit",invalid:"invalid",over:"over",under:"under",mobile:"Mobile",home:"Home",work:"Work",fax:"Fax",yes:"Yes",no:"No"});e.formBuilder.lang.dict}(jQuery),function(e){"use strict";var t="es",i=["es","spa"];"undefined"==typeof e.formBuilder&&(e.formBuilder={});var n=e.formBuilder.lang;if(n||(n=e.formBuilder.lang={}),n.locales||(n.locales={}),n.locales[t]||(n.locales[t]={}),"undefined"==typeof n.code){var r;if(r=navigator.language,r||(r=navigator.userLanguage),r||(r=navigator.browserLanguage),r||(r=navigator.systemLanguage),r){var a=r.indexOf("-");r=r.slice(0,a>0?a:void 0),-1!==i.indexOf(r)&&(n.code=t)}}e.extend(!0,n.locales[t],{remove:"Quitar",mobile:"Móvil",home:"Casa",work:"Trabajo",fax:"Fax",yes:"Sí",no:"No"}),e.fn.datepicker.dates[t]={days:["Domingo","Lunes","Martes","Mi&eacute;rcoles","Jueves","Viernes","S&aacute;bado"],daysShort:["Dom","Lun","Mar","Mi&eacute;","Juv","Vie","S&aacute;b"],daysMin:["Do","Lu","Ma","Mi","Ju","Vi","S&aacute;"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],today:"Hoy",clear:"Borre",rtl:!1}}(jQuery),function(e){"use strict";e.widget("formBuilder.spin",{options:{lines:10,length:4,width:2,radius:3,rotate:0,color:"#000",speed:1.5,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:0,top:"0",left:"1000"},_spinner:void 0,_create:function(){var e=this;e._spinner=new Spinner(e.options)},_init:function(){this.start()},start:function(){this._spinner.spin(this.element[0])},stop:function(){this._spinner.stop()},_destroy:function(){var e=this;e.stop(),delete e._spinner}})}(jQuery),function(e){"use strict";"undefined"==typeof window.console&&(window.console={log:function(){},dir:function(){},timeStamp:function(){},time:function(){},timeEnd:function(){}}),"undefined"==typeof console.timeStamp&&(console.timeStamp=function(){}),"undefined"==typeof console.time&&(console.time=function(){}),"undefined"==typeof console.timeEnd&&(console.timeEnd=function(){}),"undefined"==typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),"undefined"==typeof e.formBuilder&&(e.formBuilder={}),"undefined"==typeof e.formBuilder.util&&(e.formBuilder.util={});var t=e.formBuilder.util,i=e.formBuilder.lang;"undefined"!=typeof i.code&&i.locales[i.code]||(i.code="en"),i.dict={},e.extend(!0,i.dict,i.locales.en),"en"!==i.code&&e.extend(i.dict,i.locales[i.code]),"undefined"==typeof t.selectPath&&(t.selectPath=function(t,i){if(void 0!==t){if(void 0===i||""===i)return t;var n,r=i.toString().split(".");for(n=0;n<r.length;n+=1){var a=r[n];if(a.match(/^[0-9]{1,3}$/)&&(a=parseInt(a,10)),0!==a||e.isArray(t)){if(void 0===t||null===t)return void 0;if(t=t[a],n===r.length-1||void 0===t)return t}}}}),"undefined"==typeof t.insertPath&&(t.insertPath=function(e,t,i){var n,r,a,o=t.split("."),s=e,l=[];for(n=0;n<o.length;n+=1)r=o[n],l.push(n===o.length-1?r.match(/^[0-9]{1,3}$/)?{k:parseInt(r,10),v:i}:{k:r,v:i}:r.match(/^[0-9]{1,3}$/)?{k:parseInt(r,10),v:{}}:{k:r,v:{}});for(n=0;n<l.length;n+=1)a=l[n],r=a.k,n===o.length-1?e[r]=a.v:("undefined"==typeof e[r]&&(e[r]=a.v),e=e[r]);return s}),"undefined"==typeof t.deletePath&&(t.deletePath=function(e,t){var i,n=t.split(".");for(i=0;i<n.length;i+=1)if(i===n.length-1)delete e[n[i]];else{if("undefined"==typeof e[n[i]])return;e=e[n[i]]}}),"undefined"==typeof e.fn.childOf&&(e.fn.childOf=function(e,t){var i;if(e instanceof jQuery&&(e=e[0]),t&&e===this[0])return!0;var n=this.parents();for(i=0;i<n.length;i++)if(e===n[i])return!0;return!1}),"undefined"==typeof window.isEmpty&&(window.isEmpty=function(e){return 0===e?!1:!e}),"undefined"==typeof t.equals&&(t.equals=function(e,i){var n;if(e===i)return!0;if(window.isEmpty(e)&&window.isEmpty(i))return!0;if(window.isEmpty(e)||window.isEmpty(i))return!1;switch(typeof e){case"object":for(n in e)if(e.hasOwnProperty(n)&&!t.equals(e[n],i[n]))return!1;for(n in i)if(i.hasOwnProperty(n)&&!t.equals(e[n],i[n]))return!1;break;case"function":if("undefined"==typeof i||e.toString()!==i.toString())return!1;break;default:if(e.toString()!==i.toString())return!1}return!0}),"undefined"==typeof t.removeEqual&&(t.removeEqual=function(i,n,r){var a,o,s;if(r||(r=[]),void 0!==i&&void 0!==n)switch(typeof i){case"object":o=!0;for(a in i)i.hasOwnProperty(a)&&(s=e.inArray(a,r)>-1?!0:t.removeEqual(i[a],n[a]),s&&(delete i[a],delete n[a]),o=o&&s);return o;default:return i.toString()===n.toString()}}),t.loadDomData=function(t,i,n){e.each(n,function(e,n){var r=t.data(n);"undefined"!=typeof r&&null!==r&&(i[n]=r)})},t.loadDomToggleData=function(t,i,n){e.each(n,function(e,n){var r=t.data(n);i[n]="undefined"==typeof r||null===r?!!i[n]:r!==!1})}}(jQuery),function(e){"use strict";e.fn.caret=function(t,i){if(0===this.length)return this;var n,r=this[0];if("number"!=typeof t){if(!e(r).is(":visible")){var a=e(r).val().length;return{begin:a,end:a}}return r.setSelectionRange?(t=r.selectionStart,i=r.selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),t=-n.duplicate().moveStart("character",-1e5),i=t+n.text.length),{begin:t,end:i}}if(!e(r).is(":visible"))return r;if(i="number"==typeof i?i:t,r.setSelectionRange){r.focus(),r.setSelectionRange(t,i);try{i===r.value.length&&(r.scrollLeft=9999999999)}catch(o){}}else r.createTextRange&&(n=r.createTextRange(),n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",t),n.select());return r}}(jQuery),function(e){"use strict";var t=e.formBuilder.util,i=e.formBuilder.lang.dict,n=0,r=function(){return n++};e.widget("formBuilder.arrayField",{_arrayFieldTemplate:'<div class="array-field"><div class="items"><div class="items-content"></div></div><div class="input-field"><div class="field-items"><span class="first field-item addon clickable array-field-add noselect"><a href="#">+</a></span><span class="field-item array-field-add-message"></span></div></div></div>',_arrayFieldItemTemplate:'<div class="input-field-group array-field-item"><div class="input-field"><div class="field-items"><span class="first field-item addon clickable sort-handle noselect">::</span></div></div><span class="sub-field"></span><div class="input-field"><div class="field-items"><span class="field-item addon clickable array-field-delete"><span class="fb-icon fb-icon-remove" title="'+i.remoasdase+'"></span></span></div></div></div>',_create:function(){var t=this,i=t.element;t.subField=i.html(),t.id=r(),i.html(t._arrayFieldTemplate),i.attr("data-addmessage")&&i.find(".array-field-add-message").text(i.attr("data-addmessage"));var n=t.items=i.find(".items");t.itemsContent=n.find(".items-content"),i.on("click",".array-field-add, .array-field-add-message",function(e){e.preventDefault(),e.stopPropagation(),t._handleAddButtonClick()}),i.on("click",".array-field-delete",function(i){i.preventDefault(),i.stopPropagation(),e(this).parents(".array-field-item").first().remove(),t._onDirty(),t._trigger("afterdelete",i)}),t.itemsContent.sortable({axis:"y",handle:".sort-handle",containment:t.itemsContent,tolerance:"pointer",stop:function(){t._checkDirty()}}),t.dirty=!1,i.on("dirty clean",function(n){e(n.target).childOf(i)&&(n.stopPropagation(),"dirty"===n.type?t._onDirty():t._onClean())})},getId:function(){return this.id},_handleAddButtonClick:function(){var e=this;e._trigger("beforeaddnewitem")&&e.addItem()},_checkDirty:function(){var e=this,i=e.data,n=e.get();t.equals(n,i)?(e.dirty=!1,e.element.trigger("clean")):(e.dirty=!0,e.element.trigger("dirty"))},_onDirty:function(){var e=this;e.dirty||e._checkDirty()},_onClean:function(){var e=this;e.dirty&&e._checkDirty()},isDirty:function(){return this.dirty},getFieldInstances:function(){var t=this,i=t.itemsContent,n=[];return i.children(".array-field-item").each(function(){n.push(e(this).find(".array-field-input-"+t.id))}),n},get:function(){var t=this,i=t.element.attr("data-sub-widget")||"inputField",n=t.itemsContent,r=[];return n.children(".array-field-item").each(function(){var n=e(this).find(".array-field-input-"+t.id)[i]("get");(0===n||n)&&r.push(n)}),r},validate:function(){var t=this,i=t.itemsContent,n=!0;return i.find(".sub-field").each(function(){n=n&&e(this).find(":formBuilder-inputField").inputField("validate")}),n},clearDirty:function(){var t=this,i=t.itemsContent;t.dirty=!1,i.find(".sub-field").each(function(){e(this).find(":formBuilder-inputField").inputField("clearDirty")})},clear:function(){var e=this;e.set([])},flash:function(){var t=this,i=t.itemsContent;i.find(".sub-field").each(function(){e(this).find(":formBuilder-inputField").inputField("flash")})},set:function(t){var i=this,n=(i.items,i.itemsContent);i._empty(),e.isArray(t)||(t=[]),i.data=t,e.each(t,function(e,t){n.append(i.drawItem(t))})},_empty:function(){var e=this,t=e.itemsContent;t.children().remove()},addItem:function(e,t){var i=this,n=i.drawItem(t),r=i.itemsContent;return(e||0===e)&&e>=0?r.children().eq(e).before(n):r.append(n),i._trigger("afteradd",null,n),n||null},drawItem:function(t){var i=this,n=i.element.attr("data-sub-widget"),r=e(i._arrayFieldItemTemplate);return n?i._drawWidgetItem(t,r,n):i._drawInternalMarkupItem(t,r),r},_drawInternalMarkupItem:function(t,i){var n=this,r=e(n.subFieldMarkup());n._trigger("beforeadd",null,r),i.find(".sub-field").html(r),r.parent().find("input[type!=submit], select, textarea, [data-load-widget-as-field]").inputField().inputField("set",t).addClass("array-field-input-"+n.id)},_drawWidgetItem:function(t,i,n){var r=this,a=e("<div/>")[n]();r._trigger("beforeadd",null,a),i.find(".sub-field").append(a),a[n]("set",t).addClass("array-field-input-"+r.id).css("display","inline")},subFieldMarkup:function(){return this.subField},_destroy:function(){var e=this;e._empty(),e.element.empty(),e.element.html(e.subField)}})}(jQuery),function(e){"use strict";var t=e.formBuilder.lang.dict;e.widget("formBuilder.dateRangePicker",{_dateRangePickerTemplate:'<div class="date-range-picker form"><input type="text" name="from" data-type="date" data-label="'+t.from+'"/><input type="text" name="to" data-type="date" data-label="'+t.to+'"/><button type="button" class="previous-range">&lt;&lt;</button><div class="input-field-group range-select"><select name="range" style="width: 138px;"><option value="custom">'+t.custom+'</option><option value="day">'+t.day+'</option><option value="week">'+t.week+'</option><option value="month">'+t.month+'</option><option value="year">'+t.year+'</option></select></div><button type="button" class="next-range">&gt;&gt;</button></div>',_create:function(){var t=this,i=t.element,n=t.form=e("<div></div>").html(t._dateRangePickerTemplate).find(".date-range-picker").formBuilder();i.append(n),t.fromDate=n.find('input[name="from"]').on("keyup ondateselect",function(){e(t.range).val("custom")}),t.toDate=n.find('input[name="to"]').on("keyup ondateselect",function(){e(t.range).val("custom")}),n.find("button.previous-range").button().on("click",function(){t._moveRange(-1,e(t.range).val())}),n.find("button.next-range").button().on("click",function(){t._moveRange(1,e(t.range).val())}),t.range=n.find('select[name="range"]').on("change",function(){t.setRange(e(this).val())})},_moveRange:function(e,t){var i=this,n=i.fromDate.inputField("get");if(n&&"custom"!==t){n=i.deserialize(n);var r=n.add(e,t),a=moment(r).add(1,t).subtract(1,"day");i._setFromAndTo(r,a)}},setRange:function(e){var t=this;if("custom"!==e){var i=t.fromDate.inputField("get");i||(i=moment()),"string"==typeof i&&(i=t.deserialize(i));var n=i.startOf(e),r=moment(n).endOf(e);t._setFromAndTo(n,r)}},_setFromAndTo:function(e,t){var i=this;"string"!=typeof e&&(e=i.serialize(e)),"string"!=typeof t&&(t=i.serialize(t)),i.fromDate.inputField("set",e),i.toDate.inputField("set",t)},serialize:function(e){return e?e.format("YYYY-MM-DD"):void 0},deserialize:function(e){return e?moment(e,"YYYY-MM-DD"):void 0},get:function(){var e=this;return e.form.formBuilder("get")},set:function(e){var t=this;t.form.formBuilder("set",e)},isDirty:function(){return this.form.formBuilder("isDirty")},clearDirty:function(){var e=this;e.form.formBuilder("clearDirty")},clear:function(){var e=this;e.set({from:"",to:"",range:"custom"})},validate:function(){var e=this,t=(e.element,e.form);return t.formBuilder("validate")?void 0:!1}})}(jQuery),function(e){"use strict";var t=e.formBuilder.lang.dict;e.widget("formBuilder.dateTimeRangePicker",{_dateTimeRangePickerTemplate:'<div class="date-range-picker form"><input type="text" name="from" data-type="dateTime" data-label="'+t.from+'"/><input type="text" name="to" data-type="dateTime" data-label="'+t.to+'"/><button type="button" class="previous-range">&lt;&lt;</button><div class="input-field-group range-select"><select name="range" style="width: 138px;"><option value="custom">'+t.custom+'</option><option value="day">'+t.day+'</option><option value="week">'+t.week+'</option><option value="month">'+t.month+'</option><option value="year">'+t.year+'</option></select></div><button type="button" class="next-range">&gt;&gt;</button></div>',_create:function(){var t=this,i=t.element,n=t.form=e("<div></div>").html(t._dateTimeRangePickerTemplate).find(".date-range-picker").formBuilder();i.append(n),t.fromDate=n.find('input[name="from"]').on("keyup ondateselect",function(){e(t.range).val("custom")}),t.toDate=n.find('input[name="to"]').on("keyup ondateselect",function(){e(t.range).val("custom")}),n.find("button.previous-range").button().on("click",function(){t._moveRange(-1,e(t.range).val())}),n.find("button.next-range").button().on("click",function(){t._moveRange(1,e(t.range).val())}),t.range=n.find('select[name="range"]').on("change",function(){t.setRange(e(this).val())})},_moveRange:function(e,t){var i,n=this,r=n.fromDate.inputField("getType"),a=n.toDate.inputField("getType");if(!r.dateWidgetInstance.isEmpty()&&"custom"!==t){i=n.deserializeDate(r.dateWidgetInstance.get());var o=i.add(e,t),s=moment(o).add(1,t).subtract(1,"day");r.dateWidgetInstance.set(n.serializeDate(o)),a.dateWidgetInstance.set(n.serializeDate(s)),r.timeWidgetInstance.isEmpty()&&r.timeWidgetInstance.set(moment().hours(0).minutes(0).utc().format("HH:mm")),a.timeWidgetInstance.isEmpty()&&a.timeWidgetInstance.set(moment().hours(23).minutes(59).utc().format("HH:mm"))}},setRange:function(e){var t,i=this,n=i.fromDate.inputField("getType"),r=i.toDate.inputField("getType");if("custom"!==e){t=n.dateWidgetInstance.get(),t||(t=moment()),"string"==typeof t&&(t=i.deserializeDate(t));var a=t.startOf(e),o=moment(a).endOf(e);n.dateWidgetInstance.set(i.serializeDate(a)),r.dateWidgetInstance.set(i.serializeDate(o)),n.timeWidgetInstance.isEmpty()&&n.timeWidgetInstance.set(moment().hours(0).minutes(0).utc().format("HH:mm")),r.timeWidgetInstance.isEmpty()&&r.timeWidgetInstance.set(moment().hours(23).minutes(59).utc().format("HH:mm")),i.range.val(e)}},serializeDate:function(e){return e?e.format("YYYY-MM-DD"):void 0},deserializeDate:function(e){return e?moment(e,"YYYY-MM-DD"):void 0},get:function(){var e=this;return e.form.formBuilder("get")},set:function(e){var t=this;t.form.formBuilder("set",e)},isDirty:function(){return this.form.formBuilder("isDirty")},clearDirty:function(){var e=this;e.form.formBuilder("clearDirty")},clear:function(){var e=this;e.set({from:"",to:"",range:"custom"})},validate:function(){var e=this,t=(e.element,e.form);return t.formBuilder("validate")?void 0:!1}})}(jQuery),function(e){"use strict";var t=e(document),i=0;e.widget("formBuilder.dropDownPanel",{options:{offset:{top:0,left:0},target:void 0,focusTarget:void 0,targetInput:!0,hideFields:void 0},_create:function(){var t=this,n=t.options,r=t.element,a=e('<div class="fb-dropDownPanel-wrapper" style="position: relative;"></div>'),o=e('<div class="fb-dropDownPanel"></div>').hide().appendTo(a);t.wrapper=a,t.panel=o,t.isOpen=!1,t.id=i++,n.targetInput=!!n.targetInput,r.addClass("fb-dropDownPanel-content").appendTo(o),n.hideFields&&Array.isArray(n.hideFields)&&e.each(n.hideFields,function(e,t){o.find('[name="'+t+'"]').remove()}),t.closeListener=function(i){return 27===i.which?(i.preventDefault(),i.stopPropagation(),t.focusTarget.focus(),void setTimeout(function(){t.close()},0)):void(e(i.target).childOf(o,!0)||e(i.target).childOf(t.focusTarget,!0)||setTimeout(function(){t.close()},0))},t.openListener=function(e){setTimeout(function(){t.open()},0)},t.attach(n.target,n.focusTarget)},getClassNames:function(){var e=this;return{target:"fb-dropDownPanel-"+e.id+"-target",focus:"fb-dropDownPanel-"+e.id+"-focusTarget"}},getId:function(){return this.id},isOpened:function(){return this.isOpen},detach:function(){var e=this,t=e.getClassNames();e.close(),e.target&&e.target.removeClass(t.target),e.focusTarget&&(e.focusTarget.removeClass(t.focus),e.focusTarget.off("click focus",e.openListener)),e.focusTarget=void 0,e.target=void 0,e.wrapper.detach()},attach:function(t,i){var n=this,r=n.options,a=n.getClassNames();if(!(t&&t instanceof e&&0!==t.length))throw"[dropDownPanel] No target element specifed.";if(n.target&&n.detach(),t.is(":formBuilder-inputField")?(i||(i=t),t=t.closest(".input-field")):t.is(".input-field")&&!i?i=t.find(":focusable:tabbable"):n.wrapper.insertAfter(t),t.is(".input-field")&&(n.wrapper.appendTo(t.closest(".input-field-group")),r.targetInput)){var o=t.find(".field-item-input");o.length>0&&(t=e(o[0]))}i||(i=t),n.target&&n.target.removeClass(a.target),n.focusTarget&&(n.focusTarget.removeClass(a.focus),n.focusTarget.off("click focus",n.openListener)),n.target=t,n.focusTarget=i,n.target.addClass(a.target),n.focusTarget.addClass(a.focus),n.focusTarget.on("click focus",n.openListener)},open:function(){{var e=this,i=e.options,n=e.panel;e.element}if(!e.isOpen&&e.target){e.isOpen=!0;var r=e.wrapper.offset(),a=e.target.offset(),o={left:a.left-r.left+i.offset.left+"px",top:a.top+e.target.outerHeight()-r.top+i.offset.top+"px",width:e.target.outerWidth()-(e.panel.outerWidth()-e.panel.width())+"px"};n.css(o),n.children().css({maxWidth:o.width,overflow:"hidden"}),e._trigger("beforeopen",null,[n,o])&&(n.show(),t.on("click keyup",e.closeListener),e._trigger("afteropen"))}},close:function(){var e=this,i=e.panel;e.isOpen&&e._trigger("beforeclose")&&(e.isOpen=!1,i.hide(),t.off("click keyup",e.closeListener),e._trigger("afterclose"))},_destroy:function(){var e=this;t.off("click keyup",e.closeListener),e.wrapper.remove()}})}(jQuery),function(e){"use strict";var t=e.formBuilder.util;e.widget("formBuilder.formBuilder",{options:{converter:{fromForm:function(e){return e},toForm:function(e){return e}},ignoreHidden:!1,defaultRequired:!1,loadHidden:!0},_create:function(){var i=this,n=i.options,r=i.element;t.loadDomToggleData(r,n,["ignoreHidden","defaultRequired","loadHidden"]),n.loadHidden&&r.hide(),i.baseData={},i.fieldsWidgets=e([]),i.fields=e([]),i.scanForNewFields(),i.dirty=!1,r.on("dirty",function(e){return i.dirty?void e.stopPropagation():void(i.dirty=!0)}).on("clean",function(e){return i.dirty?(i.dirty=i.isDirty(),void(i.dirty&&e.stopPropagation())):void e.stopPropagation()}),n.loadHidden&&r.show()},scanForNewFields:function(){var t=this,i=t.options,n=t.element;n.find("[data-load-widget-as-field]").each(function(){var i=e(this);if(!i.attr("name"))throw new Error("data-load-widget-as-field must have name attribute");if(!t.fieldsWidgets.has(i[0]).length){var n=i.attr("data-load-widget-as-field");if(!n||!e.isFunction(i[n]))throw new Error('Cannot load widget "'+n+'" as field, it does not exist');i[n](),t.fieldsWidgets=t.fieldsWidgets.add(i);var r=i.attr("data-label");r&&i.addClass("field-items").wrap('<div class="input-field-group"><div class="input-field"></div></div>').before("<label>"+r+"</label>")}}),n.find('input[type="checkbox"]').not(":formBuilder-selectionField").not(".form-builder-ignore *").not("[data-load-widget-as-field]").not("[data-load-widget-as-field] *").each(function(){var n=e(this);n.selectionField({required:i.defaultRequired}),t.fieldsWidgets=t.fieldsWidgets.add(n)});var r=n.find('input[type="radio"]').not(":formBuilder-selectionField").not(".form-builder-ignore *").not("[data-load-widget-as-field]").not("[data-load-widget-as-field] *");r.each(function(){var n=e(this);if(!n.is(":formBuilder-selectionField")){var a=r.filter('[name="'+this.name+'"]');a.each(function(){e(this).selectionField({required:i.defaultRequired,radioGroup:a})}),t.fieldsWidgets=t.fieldsWidgets.add(n)}}),n.find('input[type!=submit][type!="checkbox"][type!="radio"], select, textarea').not(":formBuilder-inputField").not(":formBuilder-selectionField").not(".form-builder-ignore *").not("[data-load-widget-as-field]").not("[data-load-widget-as-field] *").each(function(){var n=e(this);n.inputField({required:i.defaultRequired}),t.fields=t.fields.add(n)}),n.find(".input-field-group").each(function(){e(this).find(".field-item:first").addClass("first")})},_proxyCommandToWidget:function(e,t){var i,n,r=Array.prototype.splice.call(arguments,2,1),a=Array.prototype.slice.call(arguments,2);if(i=e.is(":formBuilder-inputField")?"formBuilderInputField":e.is(":formBuilder-selectionField")?"formBuilderSelectionField":e.data("load-widget-as-field"),n=e.data(i),!t||i&&n&&n[r])try{return n[r].apply(n,a)}catch(o){throw new Error("ERROR: widget field error NAME["+i+"] METHOD["+r+"]")}},isDirty:function(){var t=this,i=!1;return t.fields.each(function(){return i=!!e(this).inputField("isDirty"),!i}),i?i:(t.fieldsWidgets.each(function(){return i=!!t._proxyCommandToWidget(e(this),!1,"isDirty"),!i}),i)},clearDirty:function(){var t=this;t.dirty=!1,t.fields.each(function(){e(this).inputField("clearDirty")}),t.fieldsWidgets.each(function(){t._proxyCommandToWidget(e(this),!1,"clearDirty")})},flashDirty:function(e){},flashError:function(t){this.fields.filter(function(){return e(this).data("inputField").options.error}).inputField("flash",t)},disable:function(){var t=this;this.fields.inputField("status","disable",!0),t.fieldsWidgets.each(function(){t._proxyCommandToWidget(e(this),!0,"status","disabled",!0)})},enable:function(){var t=this;t.fields.inputField("status","disable",!1),t.fieldsWidgets.each(function(){t._proxyCommandToWidget(e(this),!0,"status","disabled",!1)})},get:function(){var t=this,i=t.options,n=t._readDataFromDom();return e.isFunction(i.converter.fromForm)&&(n=i.converter.fromForm(n)),n||(n={}),n},clear:function(){{var t=this;t.options}t.baseData={},t.fields.each(function(){e(this).inputField("clear")}),t.fieldsWidgets.each(function(){t._proxyCommandToWidget(e(this),!1,"clear")})},conflicts:function(i,n){var r=this,a=r._convertFormData(i),o=[];if(r.isDirty()){var s=e.extend(!0,{},r.baseData),l=e.extend(!0,{},a);return t.removeEqual(s,l,n),r.fields.each(function(){var t=e(this),i=t.attr("name"),n=t.inputField("conflicts",a[i]);n&&o.push(n)}),r.fieldsWidgets.each(function(){var t=r._proxyCommandToWidget(e(this),!1,"conflicts",a);t&&(e.isArray(t)?o.concat(t):o.push(t))}),o.length?o:!1}},set:function(e,t){var i=this,n=i._convertFormData(e);i._trigger("beforeset",null,n),i._writeDataToDom(n,t),i._trigger("afterset",null,n)},_convertFormData:function(t){var i=this,n=i.options,r=e.extend(!0,{},t||{});return e.isFunction(n.converter.toForm)&&(r=n.converter.toForm(r)),r},validate:function(){var t=this,i=(t.options,!0);return t.fields.each(function(){var n=e(this);t.ignoreHidden&&!n.is(":visible")||n.inputField("validate")!==!1||(i=!1)}),t.fieldsWidgets.each(function(){var n=e(this);t.ignoreHidden&&!n.is(":visible")||t._proxyCommandToWidget(n,!1,"validate")!==!1||(i=!1)}),i},_destroy:function(){var t=this;t.fields.inputField("destroy"),t.fieldsWidgets.each(function(){t._proxyCommandToWidget(e(this),!1,"destroy")})},getFields:function(){return this.fields},_writeDataToDom:function(i,n){{var r=this;r.options}r.fields.each(function(){e(this).inputField("set",t.selectPath(i,e(this).attr("name")),n)}),r.fieldsWidgets.each(function(){r._proxyCommandToWidget(e(this),!1,"set",t.selectPath(i,e(this).attr("name")),n)})},_readDataFromDom:function(){var i=this,n=i.options.ignoreHidden,r={};return i.fields.each(function(){var i=e(this);if(!n||i.is(":visible")){var a=i.inputField("get");e.isArray(a)&&(a=a[0]),t.insertPath(r,i.attr("name"),a)}}),i.fieldsWidgets.each(function(){var n=e(this),a=i.options.ignoreHidden;if(!a||n.is(":visible")){var o=i._proxyCommandToWidget(n,!1,"get");t.insertPath(r,n.attr("name"),o)}}),r}})}(jQuery),function(e){"use strict";var t=e.formBuilder.util,i=e.formBuilder.lang.dict,n=function(e,t,i,r){r=r||0,i>r&&(e(),setTimeout(function(){n(e,t,i,r+1)},t))},r=["require","disable","error","hover","warn","focus"];e.widget("formBuilder.fieldWidget",{isDirty:function(){return!1},validate:function(){return!0},clearDirty:function(){},clear:function(){this.set()},flash:function(){},set:function(e){},get:function(){return null}}),e.widget("formBuilder.inputField",{options:{type:"text",label:"",require:"",required:"",placeholder:"",min:"",max:"",error:"error"},_create:function(){var i=this,n=i.options,r=i.element;if(!r.is("input[type!=submit], select, textarea"))throw new Error("invalid element");i.dirty=!1,t.loadDomData(r,n,["empty","placeholder","type","label","min","max","preinput","postinput","suffix","prefix"]),t.loadDomToggleData(r,n,["require","required"]),n.require=n.require||n.required,!n.placeholder&&n.empty&&(n.placeholder=n.empty);var a,o=r.next();(o.is("div.form-input-tooltip")||o.is("div.tooltip"))&&(a=o);var s=i.field=e('<div class="input-field"><div class="field-items"><span class="field-item field-item-input"></span></div></div>'),l=i.layers={items:s.find(".field-items"),input:s.find(".field-item-input")};n.label&&i.setLabel(n.label),r.before(s).appendTo(l.input),s.attr("class",e.trim(s.attr("class"))+" "+e.trim(r.attr("class"))),r.removeAttr("class"),r.is("textarea")&&(s.addClass("textarea-fix"),r.wrap('<div class="textarea-wrapper"></div>')),r.is("select")&&s.addClass("select-fix");var d=s.closest(".input-field-group, :formBuilder-formBuilder");if((!d.length||d.is(":formBuilder-formBuilder"))&&(s.wrap('<div class="input-field-group"/>'),s.find(".field-item:first").addClass("first")),n.placeholder&&i.placeholder(n.placeholder),n.preinput&&i.addOn(-1,n.preinput),n.postinput&&i.addOn(1,n.postinput),n.suffix&&i.setSuffix(n.suffix),n.prefix&&i.setPrefix(n.prefix),a){var u=i.addOn(1e3,'<span class="tooltip noselect">?</span>',"clickable");s.addClass("has-tooltip"),a.popOver({target:u,onShow:function(){u.addClass("open")},onHide:function(){u.removeClass("open")}}).on("click",function(){r.focus()}),a.popOver("hide"),u.on("click",function(){a.popOver("toggle")})}l.input.on("mousedown.inputField",function(){e("body").one("mouseup.inputField",function(){r.focus()})}),i.autoValidate="blur",i.states={},i.status("require",n.require,!1),r.focus(function(){i.status("focus",!0)}).blur(function(e){i.status("focus",!1),i._onBlur(e)}).change(function(e){i._onKeyup(e)}).on("inputfilterkeyignored.inputField",function(){i.flash()}).on("inputfilterkeytyped.inputField",function(){i.suffixShim&&i.suffixShim.text(i.element.val())}).on("keyup",function(e){i._onKeyup(e)}).on("keydown",function(e){i._onKeydown(e)}),s.mouseenter(function(){i.status("hover",!0)}).mouseleave(function(){i.status("hover",!1)}),i.setType(n.type),i.prevValue=r.val(),n.max&&i.setMax(n.max)},setLabel:function(t){var i=this,n=i.field;i.label||(i.label=e("<label>"+t+"</label>"),i.label.prependTo(n)),i.label.html(t)},setSuffix:function(t){var i=this,n=i.options,r=i.layers;if(n.prefix){var a="&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";t=a+t}r.suffix?r.suffix.find(".value").text(t):(r.suffix=e('<div class="suffix-overlay"><div class="shim"></div><span class="value noselect">'+t+"</span></div>").prependTo(r.items),i.suffixShim=r.suffix.find(".shim"))},setPrefix:function(t){var i=this,n=i.layers;n.prefix?i.layers.prefix.find(".value").text(t):n.prefix=e('<div class="prefix-overlay noselect">'+t+"</div>").prependTo(n.items)},setMax:function(e){var t=this,i=t.element;i.is(":formBuilder-inputFilter")?i.inputFilter("setMax",e):i.inputFilter({toUpper:!1,max:e,pattern:/./})},_onKeydown:function(e){var t=this;t._showLayer("placeholder",!1)},_onKeyup:function(e){var t=this;"keyup"===t.autoValidate&&setTimeout(function(){t.validate(!0)},0),t.checkDirty(),t.redraw()},checkDirty:function(){var i=this,n=i.element;if(i.dirty)i.cleanCheckTimer&&clearTimeout(i.cleanCheckTimer),i.cleanCheckTimer=setTimeout(function(){var r=i.prevValue,a=i.get();0===r||r&&!e.isEmptyObject(r)||(r=""),0===a||a&&!e.isEmptyObject(a)||(a=""),t.equals(r,a)&&(i.dirty=!1,n.trigger("clean"),i.redraw())},300);else{var r=i.get();t.equals(i.prevValue,r)||"undefined"==typeof i.prevValue&&""===r||(n.trigger("dirty"),i.dirty=!0)}},isDirty:function(){return this.dirty},_onBlur:function(e){var t=this;"blur"===t.autoValidate&&setTimeout(function(){t.validate(!0)},0)},addOn:function(t,i,n){var r=this,a=r.layers;"number"!=typeof t&&(t=0);var o=e('<span data-weight="'+t+'" class="field-item addon">'+i+"</span>");n&&o.addClass(n);var s=!0,l=!1;return a.items.children().each(function(){var i=e(this);if(i.hasClass("field-item-input"))return void(s=!1);var n=i.data("weight");return"number"!=typeof n&&(n=0),s&&0>t&&n>=t?(o.insertBefore(i),l=!0,a.items.find(".field-item.first").not(":first").removeClass("first"),a.items.find(".field-item").filter(":first").addClass("first"),!1):!s&&t>=0&&n>=t?(o.insertBefore(i),l=!0,!1):void 0}),!l&&0>t?(a.items.find(".field-item-input").before(o),a.items.find(".field-item.first").not(":first").removeClass("first"),a.items.find(".field-item").filter(":first").addClass("first")):l||a.items.append(o),o},placeholder:function(t){var i=this,n=i.layers;n.placeholder||(n.placeholder=e('<div class="placeholder noselect"></div>').hide().appendTo(n.input)),n.placeholder.text(t)},_init:function(){var e=this;e.set(e.element.attr("value"))},clear:function(){var t=this,i=t.type;t.clearDirty(),i&&e.isFunction(i.clear)?i.clear.call(i,t):(t.prevValue="",t.set(""))},clearDirty:function(){var e=this;e.cleanCheckTimer&&clearTimeout(e.cleanCheckTimer),e.dirty=!1,e.field.removeClass("dirty"),e.element.trigger("clean")},conflicts:function(e){var t=this;return t.dirty?{key:t.element.attr("name"),vOld:t.get(),vNew:e}:null},set:function(t,i){var n,r=this,a=r.element;i=e.extend({autoClean:!0},i),i.autoClean&&(r.prevValue=t,r.clearDirty()),r.hasStatus("error")&&r.status("error",!1,!1),n=r._formatToField(t),"undefined"!=typeof n&&a.val(n);var o=a.data("inputFilter");o&&o._clean(),r._trigger("afterset",null,[n,t]),r.redraw()},get:function(){var e=this,t=e.element;return e._formatFromField(t.val())},value:function(e){var t=this;return void 0===e?t.get():t.set(e)},isEmpty:function(){var t=this,i=t.type;return e.isFunction(i.isEmpty)?i.isEmpty.call(i,t):""===e.trim(t.element.val())},validate:function(t){var n=this,r=n.states,a=n.type,o=n.isEmpty();if(!t&&r.require&&o)return n.setError({message:i.required}),!1;if(o)return n.clearError(),!0;if(e.isFunction(a.validate)){var s=a.validate.call(a,n);return"undefined"==typeof s?(n.clearError(),!0):(n.setError(s),!1)}return n.clearError(),!0},flash:function(e){{var t=this;t.options}n(function(){t.field.addClass("flash"),t.flashTimer=setTimeout(function(){t.field.removeClass("flash")},150)},150,e||1)},setError:function(t){var i=this,n=(i.states.error,i.layers);return void 0===t?void i.clearError():(n.error||(n.error=e('<div class="error-overlay noselect"></div>').appendTo(n.input)),n.error.text(t.message),i.status("error",!0),
void(i.autoValidate="keyup"))},clearError:function(){var e=this;e.states.error&&(e.autoValidate="blur",e.status("error",!1))},_formatToField:function(t){var i=this,n=i.type;return null===t||void 0===t?t:n&&n.converter&&e.isFunction(n.converter.toField)?n.converter.toField.call(n,t,i):t},_formatFromField:function(t){var i=this,n=i.type;return n&&n.converter&&e.isFunction(n.converter.fromField)?n.converter.fromField.call(n,t,i):t},redraw:function(){var e=this,t=e.element,i=(e.options,!!t.val()),n=!1,r=!0,a=!0,o=e.layers;i&&(a=!1),e.suffixShim&&!a&&e.suffixShim.text(t.val());var s;o.prefix&&(a?(t.css({paddingLeft:e.startPaddingLeft,width:e.startInputWidth+"px"}),e.prefixPaddingAdded=!1):e.prefixPaddingAdded||(e.startInputWidth=t.width(),e.startPaddingLeft=parseInt(t.css("padding-left"),10),e.startPaddingLeft=isNaN(e.startPaddingLeft)?5:e.startPaddingLeft,o.prefix&&o.suffix?(s=o.suffix.find(".value").outerWidth(),t.css({paddingLeft:e.startPaddingLeft+o.prefix.outerWidth()+"px",paddingRight:e.startPaddingRight+s+"px",width:e.startInputWidth-o.prefix.outerWidth()+"px"}),e.suffixShim.css({maxWidth:e.startInputWidth-s+"px"}),e.suffixPaddingAdded=!0):t.css({paddingLeft:e.startPaddingLeft+o.prefix.outerWidth()+"px",width:e.startInputWidth-o.prefix.outerWidth()+"px"}),e.prefixPaddingAdded=!0)),o.suffix&&(a?(t.css({paddingRight:e.startPaddingRight,width:e.startInputWidth+"px"}),e.suffixPaddingAdded=!1):e.suffixPaddingAdded||(s=o.suffix.find(".value").outerWidth(),e.startInputWidth=t.width(),e.startPaddingRight=t.css("padding-right").replace("[^0-9]",""),e.startPaddingRight=isNaN(e.startPaddingRight)?0:parseInt(e.startPaddingRight,10),t.css({paddingRight:e.startPaddingRight+s+"px",width:e.startInputWidth-s+"px"}),e.suffixShim.css({maxWidth:e.startInputWidth-s+"px"}),e.suffixPaddingAdded=!0)),e.states.error&&(r=!1,n=!0),e.dirty?e.field.addClass("dirty"):e.field.removeClass("dirty"),e._showLayer("error",n),e._showLayer("notice",r),e._showLayer("placeholder",a),e._showLayer("suffix",!a),e._showLayer("prefix",!a)},_showLayer:function(e,t){var i=this,n=i.element;if(i.layers[e])if(t){if("suffix"===e?i.layers[e].css("visibility","visible"):i.layers[e].show(),"placeholder"===e&&n.width()>0)for(var r=i.layers[e];r.outerWidth(!0)>n.width()&&parseFloat(r.css("font-size"),10)>=8;)r.css("font-size","-=1.0")}else"suffix"===e?i.layers[e].css("visibility","hidden"):i.layers[e].hide()},setType:function(t){var i=this,n=e.formBuilder.inputField.types,r=i.type;r&&e.isFunction(r.tearDown)&&r.tearDown().call(r,i),t&&n[t]||(t="text"),r=Object.create(n[t]),e.isFunction(r.setUp)&&r.setUp.call(r,i),i.type=r},getType:function(){return this.type},hide:function(){this.field.hide()},show:function(e){e?this.field.css("display",e):this.field.show()},getField:function(){return this.field},enable:function(){this.status("disable",!1)},disable:function(){this.status("disable",!0)},isDisabled:function(){return this.hasStatus("disable")},status:function(t,i,n){{var a=this;a.options}if(!(e.inArray(t,r)<0)){var o=!!i,s=a.states;if(o!==s[t]){s[t]=o,a.redraw(),s[t]?a.field.addClass(t):a.field.removeClass(t);var l=a.layers;"disable"===t&&(l.disable||(l.disable=e('<div class="disable-overlay"></div>').appendTo(l.items)),o?l.disable.css({width:l.items.outerWidth()-2+"px",height:l.items.outerHeight()-2+"px"}).show():l.disable.hide()),n!==!1&&a._trigger("statusUpdate",null,{statusName:t,value:s[t]})}}},updateStatus:function(e,t,i){this.status(e,t,i)},hasStatus:function(e){return!!this.states[e]},_destroy:function(){var e=this;e.type&&e.type.tearDown&&e.type.tearDown.call(e.type,e)}}),e.formBuilder.inputField.types={}}(jQuery),function(e){"use strict";e.widget("formBuilder.inputFilter",{options:{toUpper:!1,max:0,pattern:/[\w\s]/,extraFilter:function(e,t){return t}},_create:function(){var t,i=this,n=i.element;if(i.nativeChange=!1,!n.is("input[type=text], input[type=password], textarea"))throw new Error("inputFilter must be applied to a text or password input ");n.on("keydown.inputFilter",e.proxy(this._onKeyDown,i)),n.on("keypress.inputFilter",e.proxy(this._onKeyPress,i)),n.on("paste.inputFilter",e.proxy(this._onPaste,i)),n.on("focus.inputFilter",function(){t=n.val()}),n.on("blur.inputFilter",function(){i.nativeChange||t===n.val()||n.change(),i.nativeChange=!1})},setMax:function(e){this.options.max=e},setPattern:function(e){this.options.pattern=e},_onPaste:function(t){setTimeout(e.proxy(this._clean,this),0)},_onKeyDown:function(e){(e.which<32||e.which>126||e.ctrlKey)&&(this.nativeChange=!0)},_onKeyPress:function(e){var t=this;return e.which<32||e.which>126||e.ctrlKey?!0:(t._type(String.fromCharCode(e.which)),!1)},_clean:function(){var t=this.element.val();this.element.val(""),e.each(t.split(""),e.proxy(function(e,t){this._type(t)},this))},_type:function(e){var t,i,n=this,r=n.options,a=n.element,o=a.val(),s="keytyped",l="keyignored";if(r.toUpper&&(e=e.toUpperCase()),e.match(r.pattern)&&"string"==typeof(e=r.extraFilter(o,e))){if(a[0]===document.activeElement){if(t=a.caret(),i=o.slice(0,t.begin)+e+o.slice(t.end),r.max&&i.length>r.max)return n._trigger(l),!1;a.val(i),a.caret(t.begin+e.length)}else{if(t=o+e,r.max&&t.length>r.max)return t=t.substring(0,r.max),n._trigger(l),!1;a.val(t)}return n._trigger(s),!0}return n._trigger(l),!1},_destroy:function(){var e=this,t=e.element;t.off(".inputFilter")}})}(jQuery),function(e){"use strict";{var t=e(document),i=e(window);e("body")}e.widget("formBuilder.popOver",{options:{target:"",top:0,left:0,appendTo:"body"},_create:function(){var n=this,r=n.options,a=n.element;n.showing=!1,a.detach();var o=a.clone().addClass("form-input-tooltip");n.title=e('<h3 class="tooltip-title"></h3>'),a.addClass("tooltip-wrapper").css("position","absolute"),a.empty(),a.append(n.title).append(o),a.appendTo(r.appendTo),n.onClick=function(t){var i=e(t.target);n.showing&&(i.childOf(a,!0)||e(t.delegateTarget.activeElement).childOf(a,!0)||i.childOf(r.target,!0)||n._trigger("beforeoffclick",t,i)&&n.hide())},n.onResize=function(e){n.showing&&n.position()},t.on("mousedown",n.onClick),i.on("resize",n.onResize)},setAppendTo:function(e){var t=this,i=t.options,n=t.element;i.appendTo=e,n.appendTo(e)},_init:function(){var e=this,t=e.element,i=e.title,n=t.attr("title");n?i.text(n).show():i.hide()},toggle:function(){{var e=this;e.element}e.showing?e.hide():e.show()},show:function(){var e=this;e.showing||setTimeout(function(){e.showing=!0,e.position(),e.element.fadeIn(10),e._trigger("onShow")},0)},hide:function(){var e=this;e.showing&&(e.showing=!1,e.element.hide(),e._trigger("onHide"))},position:function(){var e=this,t=e.options,i=e.element,n="left+"+(t.left-3)+" top+"+(t.top+3),r="left bottom",a="flipfit none";t.my&&(n=t.my),t.at&&(r=t.at),t.collision&&(a=t.collision),setTimeout(function(){i.position({my:n,at:r,of:t.target,collision:a})},0)},_destroy:function(){{var e=this;e.element}t.off("mousedown",e.onClick),i.off("resize",e.onResize)}})}(jQuery),function(e){"use strict";var t=e.formBuilder.util,i=["require","disable","error","hover","warn"];e.widget("formBuilder.selectionField",{options:{require:void 0,required:void 0,label:"",radioGroup:void 0},_create:function(){var i=this,n=i.options,r=i.element;i.dirty=!1,t.loadDomData(r,n,["label"]),t.loadDomToggleData(r,n,["require","required"]),n.required=n.require||n.required;{var a=i.field=e('<div class="selection-field"></div>');i.layers={}}r.before(a).appendTo(a),n.label||(n.label=r.data("label")),n.label&&i.setLabel(n.label),a.attr("class",e.trim(a.attr("class")+" "+r.attr("class"))),r.removeAttr("class"),i.isRadio=r.is('[type="radio"]');var o=a.closest(".selection-field-group, :formBuilder-formBuilder");if((!o.length||o.is(":formBuilder-formBuilder"))&&(a.wrap('<div class="selection-field-group"/>'),i.isRadio&&(i.radioGroup=r)),i.states={},i.isRadio){i.radioGroup=n.radioGroup?n.radioGroup:r,i._updatePreviousValue();var s=i.radioGroup.not(r).filter(":formBuilder-selectionField");n.required||s.each(function(){var t=e(this).data("formBuilderSelectionField").options;return t.required?(n.required=t.required,!1):void 0}),n.required&&s.each(function(){var t=e(this).data("formBuilderSelectionField");t.options.required=n.required})}else i.prevValue=r.is(":checked");i.status("require",n.required,!1),r.change(function(e){i.validate()}),a.mouseenter(function(){i.status("hover",!0)}).mouseleave(function(){i.status("hover",!1)})},setLabel:function(t){var i=this,n=i.element;i.label||(n.wrap("<label></label>"),i.label=e("<span></span>"),n.after(i.label)),i.label.html(t)},_updatePreviousValue:function(t){var i=this;if(!i.isRadio)return void(i.prevValue=!!t);var n=t||i.radioGroup.filter(":checked").val();i.radioGroup.filter(":formBuilder-selectionField").each(function(){e(this).data("formBuilderSelectionField").prevValue=n})},checkDirty:function(){{var i=this;i.element}if(i.dirty)i.cleanCheckTimer&&clearTimeout(i.cleanCheckTimer),i.cleanCheckTimer=setTimeout(function(){var e=i.prevValue,n=i.get();t.equals(e,n)&&i.clearDirty()},300);else{var n=i.get();t.equals(i.prevValue,n)||"undefined"==typeof i.prevValue&&!n||(i.isRadio?i.radioGroup.each(function(){var t=e(this).data("formBuilderSelectionField");t.dirty=!0,t.field.addClass("dirty")}):(i.dirty=!0,i.field.addClass("dirty")),i._trigger("dirty"))}},isDirty:function(){return this.dirty},clear:function(){var e=this;e.set()},clearDirty:function(){var t=this;t.cleanCheckTimer&&clearTimeout(t.cleanCheckTimer),t.isRadio?t.radioGroup.each(function(){var t=e(this).data("formBuilderSelectionField");t.dirty=!1,t.field.removeClass("dirty")}):(t.dirty=!1,t.field.removeClass("dirty")),t._trigger("clean")},conflicts:function(e){var t=this;return t.dirty&&t.get()!==e?{key:t.element.attr("name"),vOld:t.get(),vNew:e}:null},set:function(e){var t=this,i=t.element;t.isRadio?(t.radioGroup.removeAttr("checked"),"undefined"!=typeof e&&t.radioGroup.filter('[value="'+e+'"]').prop("checked",!0),t._updatePreviousValue()):(e=!!e,t.prevValue=e,i.prop("checked",t.prevValue)),t.clearDirty(),t._trigger("afterset",null,[e])},get:function(){var e=this,t=e.element;return e.isRadio?e.radioGroup.filter(":checked").val():t.is(":checked")},validate:function(){var e=this,t=e.options,i=e.element,n=!0;return t.required&&(n=e.isRadio?1===e.radioGroup.filter(":checked").length:!!i.prop("checked")),e.status("error",!n),n},hide:function(){this.field.hide()},show:function(){this.field.show()},getField:function(){return this.field},enable:function(){this.status("disable",!1)},disable:function(){this.status("disable",!0)},isDisabled:function(){return this.hasStatus("disable")},status:function(t,n,r){{var a=this;a.options}if(!(e.inArray(t,i)<0)){var o=!!n,s=a.states;o!==s[t]&&(s[t]=o,s[t]?a.field.addClass(t):a.field.removeClass(t),"disable"===t&&a.field.css("pointer-events",o?"none":"auto"),!a.isRadio||"disable"!==t&&"error"!==t&&"warn"!==t&&"require"!==t||a.radioGroup.not(a.element).filter(":formBuilder-selectionField").filter(function(){return e(this).selectionField("hasStatus",t)!==o}).selectionField("status",t,n,!1),r!==!1&&a._trigger("statusUpdate",null,{statusName:t,value:s[t]}))}},hasStatus:function(e){return!!this.states[e]},_destroy:function(){var t=this;t.radioGroup&&t.radioGroup.not(t.element).each(function(){var t=e(this);t.data("formBuilderSelectionField").radioGroup=void 0,t.selectionField("destroy")})}})}(jQuery),function(e){"use strict";e.widget("formBuilder.submitButton",{options:{color:"#000",delay:10,disabled:!1,waiting:!1,preventDefault:!0,enterKeyListenerProvider:function(){return this.parents("form").first()},onKeyDown:function(t){13!==t.keyCode||e(t.target).is("textarea")||this.submit.call(this,t)}},_showLoading:function(){var e=this,t=e.element,i=e.options,n=(t.width(),t.height());t.addClass("submitting"),e.getButtonLabel().css("visibility","hidden"),e.spinner.appendTo(t).spin({color:i.color,top:-n+4,left:-7})},getButtonLabel:function(){return this.element.find(".ui-button-text")},_hideLoading:function(){var e=this,t=e.element;e.destroyed||(t.removeClass("submitting"),e.spinner.spin("stop"),e.getButtonLabel().css("visibility","visible"))},_create:function(){var t=this,i=t.options,n=t.element,r={};i.icons&&(r.icons=i.icons),i.disabled&&(r.disabled=i.disabled),void 0!==i.text&&(r.text=i.text),i.label=n.html(),n.button(r).on("click.submitButton",e.proxy(t.submit,t)),t.spinner=e('<div class="spinner" style="display: inline-block; position: absolute; margin-left: -.10cm; margin-top: -.4cm;"></div>'),t.spinner.appendTo(n);var a=i.enterKeyListenerProvider;if(e.isFunction(a)){var o=a.call(n);"undefined"!=typeof o&&o.on("keydown.submitButton",e.proxy(i.onKeyDown,t))}},submit:function(e){var t=this,i=t.options;return i.preventDefault&&e&&e.preventDefault(),i.waiting===!0||i.disabled===!0?this:(e||(e=null),t._trigger("beforesubmit",e)===!1?this:(i.waiting=!0,t._showLoading.call(t),setTimeout(function(){t._trigger("submit",e,function(){i.waiting=!1,t._hideLoading.call(t),t._trigger("aftersubmit",e)})},i.delay),this))},enable:function(){this.options.disabled=!1},disable:function(){this.options.disabled=!0},_destroy:function(){var e=this,t=e.element;t.off(".submitButton"),e.destroyed=!0}})}(jQuery),function(e){"use strict";var t=e.formBuilder.lang.dict;e.widget("formBuilder.textSubmitter",{_textSubmitterTemplate:'<div class="text-submitter"><textarea name="text-entry" rows="3" /><div class="send-instruction noselect"></div></div>',options:{width:"300px",placeholder:"",sendInstruction:t.defaultSendInstruction,rows:void 0,ignoreEmptySubmit:!1},_create:function(){var t=this,i=t.element,n=t.options;t.container=e(t._textSubmitterTemplate),i.append(t.container),t.textEntry=i.find('textarea[name="text-entry"]'),isNaN(n.rows)||t.textEntry.attr("rows",n.rows),t.sendInstruction=i.find(".send-instruction").text(n.sendInstruction),t.sendInstruction.css("visibility","hidden"),t.textEntry.width(n.width).inputField({placeholder:n.placeholder,statusUpdate:function(e,i){"disable"===i.statusName&&(i.value===!1&&t.textEntry.is(":focus")?(t.sendInstruction.css("visibility","visible"),t.textEntry.removeAttr("readonly")):(t.sendInstruction.css("visibility","hidden"),t.textEntry.attr("readonly",!0)))}}),t.element.width(n.width),t.textEntry.on("focus",function(){t.sendInstruction.css("visibility","visible")}).on("blur",function(){t.sendInstruction.css("visibility","hidden")}).on("keydown",function(e){13!==e.which||e.shiftKey||(e.preventDefault(),t._submit())})},_submit:function(){var e=this,t=e.options;if(!(e.textEntry.inputField("isDisabled")||t.ignoreEmptySubmit&&e.textEntry.inputField("isEmpty"))){e.disable();var i=function(t){t&&e.clear(),e.enable()};e._trigger("submit",null,{text:e.get(),onComplete:i})}},set:function(e){var t=this;t.textEntry.inputField("set",e)},setInstruction:function(e){var t=this;t.sendInstruction.text(e)},get:function(){var e=this;return e.textEntry.inputField("get")},clear:function(){var e=this;e.textEntry.inputField("clear")},disable:function(){var e=this;e.textEntry.inputField("disable")},enable:function(){var e=this;e.textEntry.inputField("enable")},_destroy:function(){var e=this;e.container.remove()}})}(jQuery),function(e){"use strict";var t=e.formBuilder.inputField.types,i=(e.formBuilder.util,e.formBuilder.lang);t.text={},t.date={attributes:["minyear","maxyear","startdate","enddate","enforceMax","enforceMin"],momentStoreFormat:"YYYY-MM-DD",_dateFormat:"MM/DD/YYYY",setUp:function(e){var t,n=this,r=e.element;e.placeholder(n._dateFormat),n.enforceMin=!!r.data("enforceMin"),n.enforceMax=!!r.data("enforceMax"),n.storeUtc=void 0===n.storeUtc?!0:!!n.storeUtc;var a=(new Date).getFullYear()-15,o=(new Date).getFullYear()+2;t=r.data("minyear"),void 0!==t&&(a="CURRENT"===t?(new Date).getFullYear():t),t=r.data("maxyear"),void 0!==t&&(o="CURRENT"===t?(new Date).getFullYear():t),n.startDate="01/1/"+a,n.endDate="12/31/"+o,t=r.data("startdate"),void 0!==t&&("TODAY"===t?n.startDate=moment().format(n._dateFormat):t.match(/^[0-9]{2}\/[0-9]{2}\/[0-9]{4}$/)&&(n.startDate=t)),t=r.data("enddate"),void 0!==t&&("TODAY"===t?n.endDate=moment().format(n._dateFormat):t.match(/^[0-9]{2}\/[0-9]{2}\/[0-9]{4}$/)&&(n.endDate=t));var s={startDate:n.startDate,endDate:n.endDate,autoclose:!0,forceParse:!1,format:"mm/dd/yyyy",todayBtn:!0,todayHighlight:!0,language:i.code};r.datepicker(s),r.inputFilter({pattern:/[0-9\/]/,max:10,toUpper:!0})},converter:{toField:function(e,t){return e&&e.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/)?e.substring(5,7)+"/"+e.substring(8,10)+"/"+e.substring(0,4):""},fromField:function(e,t){return e&&e.match(/^[0-9]{2}\/[0-9]{2}\/[0-9]{4}$/)?e.substring(6,10)+"-"+e.substring(0,2)+"-"+e.substring(3,5):""}},tearDown:function(e){e.element.datepicker("remove")},validate:function(e){var t=this,n=moment(e.element.val(),t._dateFormat,!0);return!n.isValid()||t.enforceMin&&n.isBefore(moment(t.startDate,t._dateFormat))||t.enforceMax&&moment(t.endDate,t._dateFormat).isBefore(n)?{message:i.dict.invalid}:void 0}}}(jQuery),function(e){"use strict";var t=e.formBuilder.inputField.types;t.display={setUp:function(e){var t=e.element;t.parents(".field-item").hide(),t.parents(".field-items").append('<div class="input-display"></div>')},converter:{toField:function(e,t){t.element.parents(".field-items").find(".input-display").html(e)},fromField:function(e,t){return t.element.parents(".field-items").find(".input-display").html().trim()}}}}(jQuery),function(e){"use strict";var t=e.formBuilder.inputField.types,i=e.formBuilder.lang.dict,n=e.formBuilder.util;t.money={attributes:["currency-symbol","hide-symbol","max-amount","min-amount","allowNegative"],setUp:function(e){var t=this,i=e.element;t.element=i;var r=t.typeOptions={currencySymbol:"$"};n.loadDomData(i,r,["currencySymbol","maxAmount","minAmount"]),n.loadDomToggleData(i,r,["hideSymbol","allowNegative"]),r.allowNegative?i.inputFilter({pattern:/[0-9\.-]/}).change(function(){t._onChange()}).blur(function(){i.val(t.format(i.val()))}):i.inputFilter({pattern:/[0-9\.]/}).change(function(){t._onChange()}).blur(function(){i.val(t.format(i.val()))}),r.hideSymbol||e.addOn(-100,r.currencySymbol)},_onChange:function(){var e=this,t=e.element,i=t.caret();t.val(e.format(t.val())).caret(i.begin,i.end)},format:function(t){if(""===e.trim(t))return"";try{if(isNaN(t)){t=t.toString();for(var i=0,n=0;n<t.length;n++)"."===t[n]&&i++;var r=t.indexOf(".");-1!==r&&(t=t.replace(/\./g,""),t=t.substring(0,r)+"."+t.substring(r)),t=parseFloat(t)}return(+t).toFixed(2)}catch(a){return""}},converter:{toField:function(e,t){return this.format(e)},fromField:function(t,i){return""===e.trim(t)?"":+this.format(t)}},validate:function(e){var t=this,n=t.typeOptions;if(n.maxAmount||n.minAmount){var r=(e.element,+e.get());if(n.maxAmount&&r>n.maxAmount)return{message:i.over};if(n.minAmount&&r<n.minAmount)return{message:i.under}}}}}(jQuery),function(e){"use strict";var t=e.formBuilder.inputField.types,i=e.formBuilder.lang.dict;t.phone={setUp:function(e){var t=this,i=e.element;i.inputFilter({pattern:/[0-9()\s\-x]/}),i.on("blur",function(){i.val(t.format(i.val()))})},converter:{toField:function(e,t){return this.format(e)},fromField:function(e,t){return this.format(e)}},format:function(t){if(!t)return"";var i=0,n=t.indexOf("x"),r=t.lastIndexOf(" "),a="",o="";n>0?i=n:r>7&&(i=r),i>0&&(a=t.substring(i+1),t=t.substring(0,i));var s=e.trim(t.replace(/[()\s\-]/g,"")),l=s.length;return"1"===s[0]&&(s=s.substring(1),l--),l>10&&(o=s.substring(10),s=s.substring(0,10),l=10),7===l?s=s.substring(0,3)+"-"+s.substring(3):10===l&&(s=s.substring(0,3)+"-"+s.substring(3,6)+"-"+s.substring(6)),a=o+a,s=s.replace(/[^0-9^x^-]/g,""),a=a.replace(/[^0-9^x^-]/g,""),a&&(s+="x"+a),s},validate:function(e){return e.element.val().match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)?void 0:{message:i.invalid}}}}(jQuery),function(e){"use strict";var t=e.formBuilder.inputField.types,i=e.formBuilder.lang.dict,n={trim:function(t){return e.trim(t)}},r=function(t,r,a,o){void 0===a&&(a={}),a.toUpper!==!1&&(a.toUpper=!0);var s={validate:function(e){return e.element.val().match(t)?void 0:{message:i.invalid}}};return(r||o)&&(s.setUp=function(e){var t={pattern:r||/./,toUpper:a.toUpper,max:o||0};e.element.attr("data-max")&&(t.max=e.element.attr("data-max")),e.element.inputFilter(t)}),void 0!==a.cannedFormatter&&e.isFunction(n[a.cannedFormatter])&&(s.format=n[a.cannedFormatter],s.converter={toField:function(e,t){return s.format(e)},fromField:function(e,t){return s.format(e)}}),s};e.formBuilder.inputField.createRegexType=r,e.extend(t,{utext:r(/.*/,/.*/,{toUpper:!0}),integer:r(/^-?[0-9]*$/,/[-0-9]/),number:r(/^-?[0-9]+\.?[0-9]*$/,/[-0-9.]/),state:r(/^[A-Z]{2}$/,/[A-Z]/,{},2),feid:r(/^[0-9]{2}\-?[0-9]{7}$/,/[0-9\-]/,{},10),zip:r(/(^\d{5}(\-?\d{4})?$)|(^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} ?\d{1}[A-Za]{1}\d{1})$/,/[0-9A-Z\s\-]/,{},10),email:r(/^(?!.*\.{2})[A-Za-z0-9._%+\-]+@[A-Za-z0-9.\-]+\.[A-Za-z]{2,4}$/,/[A-Za-z0-9._%+\-@]/,{toUpper:!1,cannedFormatter:"trim"})})}(jQuery),function(e){"use strict";var t=e(document),i=e.formBuilder.util;e.formBuilder.inputField.types.select={setUp:function(t){var i=this,n=(t.options,t.element);i.element=n,i.source=[],i.inputWidget=t;var r=i.fieldGroup=t.field.parents(".input-field-group");n.is("select")&&console.log("** ERROR: deprecated use of <select> in the select type **"),n.css("opacity",0);i.shim=e('<div class="shim"></div>').insertAfter(n);t.field.addClass("select-box"),i.iconClosed=e('<span class="fb-icon fb-icon-sort-down dropdown-closed-icon"></span>').insertAfter(n),i.iconOpen=e('<span class="fb-icon fb-icon-sort-up dropdown-open-icon"></span>').insertAfter(n).hide();var a=i.panel=e('<div class="fb-select-panel"><div class="tms-select-dropdown-content"><div class="search" style="position:relative;"/><div class="options" style="position:relative;"/></div></div>').hide();i.options=a.find(".options"),t.layers.items.append(a).css("position","relative");var o=i.sectionClass="selected";a.on("click",".option",function(){i._setSelected()}).on("mouseenter",".option",function(){a.find("."+o).removeClass(o),e(this).addClass(o)}).on("mouseleave",".option",function(){e(this).removeClass(o)}),t.layers.items.on("click",function(n){if(!t.states.disable){var r=e(n.target);r.childOf(a,!0)||setTimeout(function(){i.toggle()},0)}});var s=i.filter=e('<input type="text" class="filter-box"/>').appendTo(a.find(".search")).inputField();s.after('<span class="fb-icon fb-icon-search"></span>'),s.parents(".field-item").first().addClass("first"),s.parent().css({display:"block",paddingRight:"2em"}).parent().css("display","block").parent().css("display","block"),s.on("click",function(e){e.preventDefault(),e.stopPropagation()}),n.on("keydown",e.proxy(i._keyDownNavigate,i)),s.on("keydown",e.proxy(i._keyDownNavigate,i)),s.on("keyup",e.proxy(i._onKeyup,i)),s.on("dirty clean",function(e){e.preventDefault(),e.stopPropagation()}),i.closeListener=function(t){var n=t.which;if(27===n||13===n)return t.preventDefault(),t.stopPropagation(),13===n?i._setSelected():i.element.focus(),void setTimeout(function(){i.close()},0);var o=e(t.target);o.childOf(a,!0)||o.childOf(r,!0)||setTimeout(function(){i.close()},0)},i.update()},_keyDownNavigate:function(e){var t=this,i=t.panel,n=t.sectionClass,r=e.which;if(9===r)return void t.element.next("input").focus();if(27===r||13===r)return void e.preventDefault();var a,o;40===r&&(a=i.find("."+n),a.length?(o=a.next(),o.length&&(o.addClass(n),a.removeClass(n))):i.find(".option:first").addClass(n),t._scroll()),38===r&&(a=i.find("."+n),a.length?(o=a.prev(),o.length&&(o.addClass(n),a.removeClass(n))):i.find(".option:last").addClass(n),t._scroll()),32>r||r>126||t.open()},_onKeyup:function(e){var t=this,i=t.filter,n=(e.which,i.val());t.filterValue!==n&&(t.filterValue=n,t._filterOptions())},_setSelected:function(){var e=this,t=e.element,i=e.panel.find(".selected:not(.filtered):visible");i.length||e._selectFirstNonEmptyOption(),i=e.panel.find(".selected:not(.filtered):visible");var n=e.item=i.data("item");n&&(e._setLabel(e.renderLabel(n)),e.close(),t.val(e.item.value),t.focus(),t.change(),e.inputWidget.redraw(),e.showHideCommand())},_selectFirstNonEmptyOption:function(){var t=this;t._removeSelection(),t.panel.find(".option:not(.filtered):visible").each(function(){var t=e(this);return t.html()?(t.addClass("selected"),!1):void 0})},_set:function(t){var i=this;i.filter.val(""),i.filterValue="",i.item=void 0,i.loaded.done(function(){i._removeSelection();var n=i.panel.find(".option");n.each(function(){var n=e(this),r=n.data("item");return i._equal(r,t)?(n.addClass("selected"),i.item=r,i._setLabel(r.label),i.showHideCommand(),!1):void 0}),i.item&&i.item.value||i.inputWidget._trigger("itemnotfound",null,[t])&&i._handleItemNotFound()})},_removeSelection:function(){this.panel.find(".option.selected").removeClass("selected")},_handleItemNotFound:function(){{var e=this;e.element}e._setDefaultItem(),e.item&&e.item.value||e._selectFirstItem()},_setDefaultItem:function(){var t=this,i=t.element,n=t.panel.find(".option"),r={value:i.attr("data-default")};n.each(function(){var n=e(this),a=n.data("item");return t._equal(a,r)?("params.category"===i.attr("name")&&console.log("found defaultValue",r,a),n.addClass("selected"),t.item=a,t._setLabel(a.label),t.showHideCommand(),!1):void 0})},_selectFirstItem:function(){var e=this,t=(e.element,e.panel.find(".option"));e.item=t.first().addClass("selected").data("item"),e._setLabel(e.item&&e.item.label?e.item.label:""),e.showHideCommand()},showHideCommand:function(){var e=this,t=e.item&&e.item.showClass,i=e.showHideSections;i&&(i.hide(),t&&i.filter("."+t).show())},clear:function(e){var t=this,i=t.element;t.item={},t.panel.find(".selected").removeClass("selected"),i.val(""),t.filter.val(""),t.filterValue="",t.shim.text(""),e||t._handleItemNotFound(),t.inputWidget.redraw()},_equal:function(e,t){return e&&t&&e.value===t.value},_setLabel:function(e){var t=this;if(t.shim.text(e),!t.shimWidthSet){var i,n;i=parseFloat(t.iconClosed.outerWidth(!0))+2*parseFloat(t.iconClosed.css("right")),n=parseFloat(t.element.width()),t.shim.css("max-width",n-i),t.shimWidthSet=!0}},_getLabel:function(){return this.shim.text()},toggle:function(){var e=this;e.panel.is(":visible")?e.close():e.open()},getOptions:function(){var t=this,i=t.panel.find(".option"),n=[];return i.each(function(){n.push(e(this).data("item"))}),n},_filterOptions:function(){var e=this;e._removeSelection(),e.panel.addClass("filtering"),e.filterTimer&&clearTimeout(e.filterTimer),e.filterTimer=setTimeout(function(){e.__filterOptionsWork()},200)},__filterOptionsWork:function(t){var i=this,n=i.filterValue;if(i.panel.addClass("filtering"),t||(t=i.panel.find(".option")),!t.length){i.panel.removeClass("filtering"),i.inputWidget._trigger("filterdone");var r=i.panel.find(".option").not(".filtered").length>0?i.panel.children().css("padding-top"):0;return void i.filter.inputField("getField").css("margin-bottom",r)}var a=t.splice(0,1e3);e.each(a,function(t,r){i._filterItem(e(r),n)}),setTimeout(function(){i.__filterOptionsWork(t)},0)},_filterItem:function(e,t){var i=this,n=e.data("item");i._itemShoudBeFiltered(n,t)?e.addClass("filtered"):e.removeClass("filtered")},_itemShoudBeFiltered:function(t,i){return i?t.label?null===t.label.match(new RegExp(e.ui.autocomplete.escapeRegex(i),"i")):!0:!1},_clearFilter:function(){var e=this;e.filter.val(""),e.panel.find(".option.filtered").removeClass("filtered")},_buildEmptyOption:function(){var e=this,t=e.element,i=t.data("emptyLabel");(""===i||i)&&e.source.unshift({label:i,value:""})},_buildOptions:function(){var t=this,i=(t.element,t.panel,t.options);t.element.trigger("tmsselectbeforebuild"),i.empty();var n=e("<div/>");t.typeOptions.noSort||t._sort(t.source),t._buildEmptyOption(),e.each(t.source,function(i,r){var a=e('<div class="option"/>'),o=t.renderItem(r);null!==o&&(a.append(o).data("item",r),n.append(a)),""===o&&a.height(20)}),i.append(n),t.element.trigger("tmsselectafterbuild",[i])},_sort:function(e){e.sort(function(e,t){if(e&&t){var i=e.label.toLowerCase(),n=t.label.toLowerCase();return i>n?1:n>i?-1:e.label>t.label?1:e.label<t.label?-1:0}})},_scroll:function(){var e=this,t=e.options;e.panel.is(":visible")&&setTimeout(function(){var i=e.panel.find(".selected");t.scrollTop(0===i.length?0:i.position().top-i.before().outerHeight())},0)},open:function(){var e=this,i=e.element,n=e.panel,r=e.inputWidget.layers.input,a=e.inputWidget.layers.items;if(!n.is(":visible")){e.filterValue="",t.on("click keyup",e.closeListener);var o=0;r.index()&&(o=r.position().left-1),n.width(i.width()).css({left:o,top:a.height()-1+"px",width:i.outerWidth()+"px"}),e.iconClosed.hide(),e.iconOpen.show(),n.show();var s=e.panel.children().css("padding-top");e.filter.inputField("getField").css("margin-bottom",s),e.filter.focus(),e._scroll()}},renderLabel:function(e){return e&&e.label||""},renderItem:function(e){return e.label},close:function(){{var e=this,i=e.panel;e.filter}t.off("click keyup",e.closeListener),i.hide(),e._clearFilter(),e.iconClosed.show(),e.iconOpen.hide()},update:function(){var t=this,n=t.element,r=t.typeOptions={filterMin:5};return i.loadDomToggleData(n,r,["noSort"]),i.loadDomData(n,r,["filterMin"]),t.clear(!0),t.loaded=e.Deferred(),t.load().done(function(i){i||(i=[]),t.source=i,setTimeout(function(){t.removeInvalid()},0),t._buildOptions(),t.filter&&t.filter.data("inputField")&&t.filter.inputField(i.length<r.filterMin?"hide":"show");var a,o=e([]);e.each(i,function(e,t){t.showClass&&(a||(a=n.parents(":formBuilder-formBuilder").first()),o=o.add(a.find("."+t.showClass)))}),t.showHideSections=o,t.loaded.resolve(),t.showHideCommand()}),t.loaded},removeInvalid:function(e,t){var i,n=this,r=n.element,a=r.val(),o=n.source,s=o.length;if(!t||!t.item){for(i=0;s>i;i++)if(o[i].label===a&&n.item&&n.item.value===o[i].value)return void(n.item=o[i]);r.val("")}},setOptions:function(e){var t=this;t.optionsMap=e,t.optionsSetDynamically=!0,t.update()},load:function(){var t,i=this,n=i.element,r=[];return i.optionsSetDynamically?(i.optionsSetDynamically=!1,e.when(i.optionsMap)):(t=n.attr("data-options"),t?r=e.parseJSON(t):n.find("option").each(function(){var t=e(this);r.push({label:t.text(),value:t.val()})}),e.when(r))},map:function(e){return{label:e,value:e}},deMap:function(e){return e?e.value||null:null},isEmpty:function(){var e=this,t=e.deMap(e.item);return 0!==t&&!t},converter:{fromField:function(){var e=this,t=e.item;if(void 0===t)return null;var i=e.deMap(t);return void 0===i?null:i},toField:function(e){var t=this,i=t.element,n=t.map(e);return e||"undefined"==typeof i.data("default")||(n=t.map(i.data("default"))),n?(t._set(n),t.item?t.item.label:void t.clear()):void t.clear()}}}}(jQuery),function(e){"use strict";var t=e.formBuilder.inputField.types;t.text={}}(jQuery),function(e){"use strict";var t=e.formBuilder.inputField.types,i=e.formBuilder.lang.dict,n=e.formBuilder.util;t.time={attributes:["step","military","storeUtc"],momentStoreFormat:"HH:mm",_regex:/^((0[0-9])|([0-9])|(1[0-2])):([0-5][0-9])((am)|(pm))$/,_regex2400:/^(([01]?[0-9])|(2[0-3])):[0-5][0-9]$/,setUp:function(e){var t=this,i=e.element,r=t.typeOptions={storeUtc:!0};n.loadDomToggleData(i,r,["military","storeUtc"]),n.loadDomData(i,r,["step","storeUtc"]),t.typeOptions.military?(e.placeholder("HH:MM"),i.inputFilter({pattern:/[0-9:]/,max:5})):(e.placeholder("H:MMam/pm"),i.inputFilter({pattern:/[0-9:apm]/,max:7})),i.timepicker({appendTo:e.getField(),selectOnBlur:!1,step:r.step,timeFormat:r.military?"H:i":"g:ia"}),i.on("showTimepicker",function(){var t=i.outerWidth();80>t&&(t=80),e.getField().children(".ui-timepicker-wrapper").width(t)})},converter:{toField:function(e,t){var i,n=this;return e&&e.match(/^[0-9]{2}:[0-9]{2}$/)?(i=moment.utc(e,n.momentStoreFormat,!0),i.isValid()?(n.typeOptions.storeUtc&&i.local(),i.format(n.typeOptions.military?"H:mm":"h:mma")):""):""},fromField:function(e,t){var i,n=this;return e&&e.match(n.typeOptions.military?n._regex2400:n._regex)?(i=moment(e,n.typeOptions.military?"H:mm":"h:mma").milliseconds(0),
i.isValid()?(n.typeOptions.storeUtc&&i.utc(),i.format(n.momentStoreFormat)):""):""}},tearDown:function(e){e.element.timepicker("remove")},validate:function(e){var t,n=this,r=e.element,a=r.val(),o={message:i.invalid};return t=a.match(n.typeOptions.military?n._regex2400:n._regex),t?void 0:o}}}(jQuery),function(e){"use strict";var t=e.formBuilder.inputField.types,i=e.formBuilder.lang.dict;t.dateTime={momentStoreFormat:"YYYY-MM-DDTHH:mm:ss[Z]",setUp:function(e){var t=this,i=e.element;t.storeUtc=i.data("storeUtc"),t.storeUtc=void 0===t.storeUtc?!0:!!t.storeUtc,t.ifw=e,t._setUpFields(),t._refreshFieldWidth(),t._setUpCleanDirtyEvents(),t.ifw.element.on("resize",function(e){t._refreshFieldWidth()})},_setUpFields:function(){var i,n,r,a=this,o=a.ifw.element,s=a.ifw.element.parent().parent();for(a.ifw.element.parent().hide(),a.dateWidget=e('<input type="text" data-type="date"/>'),a.timeWidget=e('<input type="text" data-type="time"/>'),r=0;r<t.date.attributes.length;++r)n=o.data(t.date.attributes[r]),void 0!==n&&a.dateWidget.data(t.date.attributes[r],n);for(r=0;r<t.time.attributes.length;++r)n=o.data(t.time.attributes[r]),void 0!==n&&a.timeWidget.data(t.time.attributes[r],n);i={require:!0},a.dateWidget.prependTo(s).inputField(i),a.timeWidget.appendTo(s).inputField(i),a.dateWidget.parent().addClass("first"),a.timeWidgetInstance=a.timeWidget.data("formBuilderInputField"),a.dateWidgetInstance=a.dateWidget.data("formBuilderInputField")},_refreshFieldWidth:function(){var e,t,i=this,n=i.ifw.element.width(),r=i.dateWidget,a=i.timeWidget;n-=r.outerWidth(!0)-r.width(),n-=a.outerWidth(!0)-a.width(),t=i.ifw.element.css("min-width"),null!==t&&(t=parseInt(t,10)),(isNaN(t)||100>t)&&(t=270),t>n&&(n=t),e=i.ifw.element.data("timeWidthRatio"),(isNaN(e)||.2>e||e>.8)&&(e=.5),a.width(n*e),r.width(n-a.width())},_setUpCleanDirtyEvents:function(){var e=this;e.dateWidget.on("dirty clean",function(t){t.stopPropagation(),e.ifw.checkDirty()}),e.timeWidget.on("dirty clean",function(t){t.stopPropagation(),e.ifw.checkDirty()})},converter:{toField:function(e,t){var i=this,n=i._splitDateAndTime(e);i.timeWidgetInstance.set(n.time),i.dateWidgetInstance.set(n.date)},fromField:function(e,i){var n,r=this,a=r.dateWidgetInstance.get(),o=r.timeWidgetInstance.get();return a.trim()&&o.trim()?(a=a.trim()?moment(a,t.date.momentStoreFormat):moment(),o.trim()?o=r.storeUtc?moment.utc(o,t.time.momentStoreFormat).local():moment(o,t.time.momentStoreFormat):(o.moment(),r.storeUtc&&o.utc()),n=r._joinDateAndTimeMoments(a,o),r.storeUtc&&n.utc(),n.isValid()?n.format(r.momentStoreFormat):""):""}},_splitDateAndTime:function(e){var i,n=this,r={};return i=n.storeUtc?moment.utc(e,n.momentStoreFormat):moment(e,n.momentStoreFormat),i.isValid()?(r.time=i.format(t.time.momentStoreFormat),n.storeUtc&&i.local(),r.date=i.format(t.date.momentStoreFormat),r):{date:"",time:""}},_joinDateAndTimeMoments:function(e,t){return moment().utcOffset(t.utcOffset()).milliseconds(0).second(t.second()).minute(t.minute()).hour(t.hour()).date(e.date()).month(e.month()).year(e.year())},validate:function(e){var t=this,n=!0,r=!t.ifw.hasStatus("require");return r&&(r=!t.dateWidgetInstance.isEmpty(),r=r&&!t.timeWidgetInstance.isEmpty()),n=n&&t.dateWidgetInstance.validate(r),n=n&&t.timeWidgetInstance.validate(r),n?void 0:{message:i.invalid}},isEmpty:function(){var t=this;return e.trim(t.dateWidget.val())+e.trim(t.timeWidget.val())===""},tearDown:function(e){var t=this;t.dateWidget.inputField("getField").remove(),t.timeWidget.inputField("getField").remove(),t.dateWidget=void 0,t.timeWidget=void 0,e.element.parent().show()}}}(jQuery),function(e){"use strict";var t=e.formBuilder.inputField.types,i=e.formBuilder.lang.dict;t.tmsPhone=e.extend({},t.phone,{_phoneTypeTemplate:'<div class="phone-type-form" style="padding: 1px;"><div class="phone-type clickable" data-code="mobile" ><span class="fb-icon fb-icon-iphone"> '+i.mobile+'</span></div><div class="phone-type clickable" data-code="home"><span class="fb-icon fb-icon-home"> '+i.home+'</span></div><div class="phone-type clickable" data-code="work"><span class="fb-icon fb-icon-office"> '+i.work+'</span></div><div class="phone-type clickable" data-code="fax"><span class="fb-icon fb-icon-print"> '+i.fax+"</span></div></div>",setUp:function(i){var n=this,r=(i.options,i.element);n.element=r,t.phone.setUp.call(n,i),n.desc=e("<span></span>"),n.setType(),n.menu=e(n._phoneTypeTemplate),n.icon=i.addOn(1,"").addClass("clickable").append(n.desc).css({textAlign:"left",width:"4.8em"}),n.icon.on("click",function(){n._setupMenu(i),n.toggleMenu()})},toggleMenu:function(){var e=this;e.menu.find(".focused").removeClass("focused").end().find('[data-code="'+e.type+'"]').addClass("focused").end().popOver("toggle")},_setupMenu:function(t){{var i=this;i.element}i.menuBuilt||(i.menu.popOver({target:i.icon,appendTo:t.getField()}).on("click",function(e){e.stopPropagation()}).on("click",".phone-type",function(t){t.stopPropagation();var n=e(this);i.setType(n.attr("data-code")),i.menu.popOver("hide")}),i.menuBuilt=!0)},setType:function(e){var t=this;e||(e="home");var n="";n="work"===e?"office":"mobile"===e?"iphone":"fax"===e?"print":e="home",t.desc.html('<span class="fb-icon fb-icon-'+n+'"> '+i[e]+"</span>"),t.type=e},converter:{fromField:function(e,i){var n=this;if(e=t.phone.converter.fromField.call(n,e,i),0!==e&&!e)return null;var r={type:n.type,number:e};return n.id&&(r.id=n.id),r},toField:function(e,i){var n=this;return e&&(n.setType(e.type),n.id=e.id,e=t.phone.converter.toField.call(n,e.number,i)),e}},destroy:function(t){t.element.off(".tmsPhone"),e.Widget.prototype.destroy.call(this)}})}(jQuery),function(e){"use strict";var t=e.formBuilder.inputField.types,i=e.formBuilder.lang.dict;e.formBuilder.inputField.arraySelectCreator=function(i){return e.extend({},t.select,{map:function(e){var t={};return t.label=e,t.value=e,t},load:function(){var t=this;return e.when(e.map(i,e.proxy(t.map,t)))}})},e.formBuilder.inputField.booleanSelectCreator=function(i,n){return e.extend({},t.select,{map:function(e){var t={},r=n;return e===!0&&(r=i),t.label=r,t.value=!!e,t},deMap:function(t){return e.isEmptyObject(t)?!1:t.value},load:function(){var t=this;return e.when(e.map([!0,!1],e.proxy(t.map,t)))}})};for(var n=new Date,r=[],a=0;10>=a;a++)r.push((n.getFullYear()+a).toString());t.tmsExpYear=e.formBuilder.inputField.arraySelectCreator(r),t.tmsYesNo=e.formBuilder.inputField.booleanSelectCreator(i.yes,i.no)}(jQuery);

//# sourceMappingURL=jquery.formBuilder.min.js.map